{"version":3,"sources":["webpack:///./src/views/drawerPages/salesHistory.vue?0132","webpack:///src/views/drawerPages/salesHistory.vue","webpack:///./src/views/drawerPages/salesHistory.vue?7633","webpack:///./src/views/drawerPages/salesHistory.vue","webpack:///./node_modules/core-js/modules/es.array.reduce.js","webpack:///./src/tools/customHttpRequest.js","webpack:///./node_modules/core-js/modules/es.array.index-of.js","webpack:///./node_modules/core-js/internals/array-reduce.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","scopedSlots","_u","key","fn","_v","_s","$store","getters","getTotalOrders","isDataReady","headers","orders","page","itemsPerPage","on","$event","pageCount","proxy","ref","item","staticClass","stopPropagation","dialog","showOrderDetail","deleteItem","_f","createdAt","model","value","callback","$$v","expression","length","selectedOrder","_id","_l","orderDetail","getProductById","productId","price","qty","getTotal","clearOrderDetail","staticRenderFns","filters","formatDate","data","computed","formTitle","brands","getBrands","types","getTypes","colors","getColors","orderDetails","reduce","created","initialData","methods","indexOf","updateStoreStock","orderId","dispatch","component","VAlert","VBtn","VCard","VCardActions","VCol","VContainer","VDataTable","VDialog","VDivider","VPagination","VRow","VSimpleTable","VSpacer","VToolbar","VToolbarTitle","$","$reduce","left","arrayMethodIsStrict","arrayMethodUsesToLength","STRICT_METHOD","USES_TO_LENGTH","1","target","proto","forced","callbackfn","arguments","undefined","customHttpRequest","type","url","params","axios","then","res","console","log","store","text","message","color","ok","payload","catch","err","code","response","error","$indexOf","nativeIndexOf","NEGATIVE_ZERO","ACCESSORS","searchElement","apply","aFunction","toObject","IndexedObject","toLength","createMethod","IS_RIGHT","that","argumentsLength","memo","O","self","index","i","TypeError","module","exports","right"],"mappings":"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","file":"js/chunk-78ada07d.9cbed4f1.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('custom-card',{attrs:{\"title\":\"Historial de ventas\",\"icon\":\"mdi-format-list-checks\"},scopedSlots:_vm._u([{key:\"content\",fn:function(){return [_c('v-col',{attrs:{\"cols\":\"12\",\"sm\":\"12\"}},[_c('p',[_c('strong',[_vm._v(\"Total de ventas:\")]),_vm._v(\" \"+_vm._s(_vm.$store.getters.getTotalOrders)+\" \")])]),_c('v-data-table',{attrs:{\"loading\":!_vm.isDataReady,\"loading-text\":\"Cargando datos\",\"hide-default-footer\":\"\",\"headers\":_vm.headers,\"items\":_vm.orders,\"page\":_vm.page,\"items-per-page\":_vm.itemsPerPage},on:{\"page-count\":function($event){_vm.pageCount = $event},\"update:page\":function($event){_vm.page=$event}},scopedSlots:_vm._u([{key:\"no-data\",fn:function(){return [_c('v-alert',{attrs:{\"type\":\"error\",\"value\":true}},[_vm._v(\"Aún no cuentas con un historial de ventas\")])]},proxy:true},{key:\"item.userId\",fn:function(){return [_vm._v(\"Administrador\")]},proxy:true},{key:\"item.actions\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('v-btn',{staticClass:\"mr-3\",attrs:{\"small\":\"\",\"color\":\"secondary\"},on:{\"click\":function($event){$event.stopPropagation();_vm.dialog=true;_vm.showOrderDetail(item)}}},[_vm._v(\"Ver detalle\")]),_c('v-btn',{attrs:{\"small\":\"\",\"color\":\"error\"},on:{\"click\":function($event){return _vm.deleteItem(item)}}},[_vm._v(\"Eliminar\")])]}},{key:\"item.createdAt\",fn:function(ref){\nvar item = ref.item;\nreturn [_vm._v(_vm._s(_vm._f(\"formatDate\")(item.createdAt)))]}}])}),_c('div',{staticClass:\"text-center pt-2\"},[_c('v-pagination',{attrs:{\"length\":_vm.pageCount},model:{value:(_vm.page),callback:function ($$v) {_vm.page=$$v},expression:\"page\"}})],1),_c('v-dialog',{attrs:{\"width\":\"500\"},model:{value:(_vm.dialog),callback:function ($$v) {_vm.dialog=$$v},expression:\"dialog\"}},[_c('v-card',[_c('v-toolbar',{attrs:{\"color\":\"secondary\",\"dark\":\"\"}},[_c('v-toolbar-title',[_vm._v(\"Detalle de venta\")])],1),_c('v-container',[_c('p',[_c('strong',[_vm._v(\"ID de la venta:\")]),_vm._v(\" \"+_vm._s(_vm.orders.length>0?_vm.orders[_vm.selectedOrder]._id:\"\")+\" \")]),_c('p',[_c('strong',[_vm._v(\"Usuario:\")]),_vm._v(\" Administrador \")]),_c('p',[_c('strong',[_vm._v(\"Detalle de productos:\")])]),_c('v-simple-table',{scopedSlots:_vm._u([{key:\"default\",fn:function(){return [_c('thead',[_c('tr',[_c('th',{staticClass:\"text-left\"},[_vm._v(\"Producto\")]),_c('th',{staticClass:\"text-left\"},[_vm._v(\"Precio\")]),_c('th',{staticClass:\"text-left\"},[_vm._v(\"Cantidad\")]),_c('th',{staticClass:\"text-left\"},[_vm._v(\"Subtotal\")])])]),_c('tbody',_vm._l((_vm.orderDetails),function(orderDetail){return _c('tr',{key:orderDetail._id},[_c('td',[_vm._v(_vm._s(_vm.$store.getters.getProductById(orderDetail.productId)))]),_c('td',[_vm._v(\"S/. \"+_vm._s(orderDetail.price))]),_c('td',[_vm._v(_vm._s(orderDetail.qty))]),_c('td',[_vm._v(\"S/. \"+_vm._s(orderDetail.price*orderDetail.qty))])])}),0)]},proxy:true}])}),_c('v-row',{staticClass:\"mr-3\",attrs:{\"justify\":\"end\"}},[_c('v-card',{staticClass:\"pa-3\",attrs:{\"outlined\":\"\",\"color\":\"light-green lighten-5\"}},[_c('strong',{staticClass:\"mr-3\"},[_vm._v(\"Total:\")]),_vm._v(\" \"),_c('span',{staticClass:\"total\"},[_vm._v(\"S/.\"+_vm._s(_vm.getTotal))])])],1)],1),_c('v-divider'),_c('v-card-actions',[_c('v-spacer'),_c('v-btn',{attrs:{\"color\":\"primary\",\"text\":\"\"},on:{\"click\":function($event){_vm.dialog = false;_vm.clearOrderDetail();}}},[_vm._v(\"De acuerdo\")])],1)],1)],1)]},proxy:true}])})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <custom-card title=\"Historial de ventas\" icon=\"mdi-format-list-checks\">\r\n    <template v-slot:content>\r\n      <v-col cols=\"12\" sm=\"12\">\r\n        <p>\r\n          <strong>Total de ventas:</strong>\r\n          {{$store.getters.getTotalOrders}}\r\n        </p>\r\n      </v-col>\r\n      <v-data-table\r\n        :loading=\"!isDataReady\"\r\n        loading-text=\"Cargando datos\"\r\n        hide-default-footer\r\n        :headers=\"headers\"\r\n        :items=\"orders\"\r\n        @page-count=\"pageCount = $event\"\r\n        :page.sync=\"page\"\r\n        :items-per-page=\"itemsPerPage\"\r\n      >\r\n        <template v-slot:no-data>\r\n          <v-alert type=\"error\" :value=\"true\">Aún no cuentas con un historial de ventas</v-alert>\r\n        </template>\r\n        <template v-slot:item.userId>Administrador</template>\r\n        <template v-slot:item.actions=\"{item}\">\r\n          <v-btn\r\n            small\r\n            color=\"secondary\"\r\n            class=\"mr-3\"\r\n            @click.stop=\"dialog=true;showOrderDetail(item)\"\r\n          >Ver detalle</v-btn>\r\n          <v-btn small color=\"error\" @click=\"deleteItem(item)\">Eliminar</v-btn>\r\n        </template>\r\n        <template v-slot:item.createdAt=\"{ item }\">{{item.createdAt | formatDate}}</template>\r\n      </v-data-table>\r\n      <div class=\"text-center pt-2\">\r\n        <v-pagination v-model=\"page\" :length=\"pageCount\"></v-pagination>\r\n      </div>\r\n      <v-dialog v-model=\"dialog\" width=\"500\">\r\n        <v-card>\r\n          <v-toolbar color=\"secondary\" dark>\r\n            <v-toolbar-title>Detalle de venta</v-toolbar-title>\r\n          </v-toolbar>\r\n          <v-container>\r\n            <p>\r\n              <strong>ID de la venta:</strong>\r\n              {{orders.length>0?orders[selectedOrder]._id:\"\"}}\r\n            </p>\r\n            <p>\r\n              <strong>Usuario:</strong>\r\n              <!-- {{orders.length>0?orders[selectedOrder].userId:\"\"}} -->\r\n              Administrador\r\n            </p>\r\n            <p>\r\n              <strong>Detalle de productos:</strong>\r\n            </p>\r\n            <v-simple-table>\r\n              <template v-slot:default>\r\n                <thead>\r\n                  <tr>\r\n                    <th class=\"text-left\">Producto</th>\r\n                    <th class=\"text-left\">Precio</th>\r\n                    <th class=\"text-left\">Cantidad</th>\r\n                    <th class=\"text-left\">Subtotal</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  <tr v-for=\"orderDetail in orderDetails\" :key=\"orderDetail._id\">\r\n                    <td>{{ $store.getters.getProductById(orderDetail.productId) }}</td>\r\n                    <td>S/. {{ orderDetail.price }}</td>\r\n                    <td>{{ orderDetail.qty }}</td>\r\n                    <td>S/. {{ orderDetail.price*orderDetail.qty }}</td>\r\n                  </tr>\r\n                </tbody>\r\n              </template>\r\n            </v-simple-table>\r\n            <v-row justify=\"end\" class=\"mr-3\">\r\n              <v-card outlined color=\"light-green lighten-5\" class=\"pa-3\">\r\n                <strong class=\"mr-3\">Total:</strong>\r\n                &nbsp;\r\n                <span class=\"total\">S/.{{getTotal}}</span>\r\n              </v-card>\r\n            </v-row>\r\n          </v-container>\r\n          <v-divider></v-divider>\r\n          <v-card-actions>\r\n            <v-spacer></v-spacer>\r\n            <v-btn color=\"primary\" text @click=\"dialog = false;clearOrderDetail();\">De acuerdo</v-btn>\r\n          </v-card-actions>\r\n        </v-card>\r\n      </v-dialog>\r\n    </template>\r\n  </custom-card>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\nimport { format} from \"date-fns\";\r\nimport { customHttpRequest } from \"../../tools/customHttpRequest\";\r\nexport default {\r\n  filters: {\r\n    formatDate: function(value) {\r\n      return format(new Date(value), \"dd/MM/yyyy\");\r\n    }\r\n  },\r\n  data: () => ({\r\n    page: 1,\r\n    pageCount: 0,\r\n    itemsPerPage: 10,\r\n    isDataReady: false,\r\n    selectedOrder: 0,\r\n    search: \"\",\r\n    dialog: false,\r\n    headers: [\r\n      { text: \"ID de venta\", value: \"_id\" },\r\n      { text: \"Usuario\", value: \"userId\" },\r\n      { text: \"Fecha\", value: \"createdAt\" },\r\n      { text: \"Acciones\", value: \"actions\" }\r\n    ],\r\n    orders: [],\r\n    orderDetails: []\r\n  }),\r\n  computed: {\r\n    formTitle() {\r\n      return \"Editar producto\";\r\n    },\r\n    brands() {\r\n      return this.$store.getters.getBrands;\r\n    },\r\n    types() {\r\n      return this.$store.getters.getTypes;\r\n    },\r\n    colors() {\r\n      return this.$store.getters.getColors;\r\n    },\r\n    getTotal() {\r\n      return this.orderDetails.reduce((a, b) => a + b.price * b.qty, 0);\r\n    }\r\n  },\r\n  created() {\r\n    this.initialData();\r\n  },\r\n\r\n  methods: {\r\n    async initialData() {\r\n      // let orders = this.$store.getters.getOrders;\r\n      // if (orders.length > 0) {\r\n      // } else {\r\n      this.orders = await this.$store.dispatch(\"loadInitialOrders\");\r\n      // }\r\n      this.isDataReady = true;\r\n    },\r\n    showOrderDetail(item) {\r\n      this.selectedOrder = this.orders.indexOf(item);\r\n      let orderId = this.orders[this.selectedOrder]._id;\r\n      axios\r\n        .get(\"/api/order-details/list\", { params: { orderId } })\r\n        .then(res => {\r\n          console.log(res);\r\n          if (res.data.ok) {\r\n            this.orderDetails = res.data.payload;\r\n          }\r\n        })\r\n        .catch(err => {\r\n          console.error(err);\r\n        });\r\n    },\r\n    clearOrderDetail() {\r\n      this.orderDetails = [];\r\n    },\r\n    deleteItem(item) {\r\n      const index = this.orders.indexOf(item);\r\n      let orderId = this.orders[index]._id;\r\n      if (\r\n        confirm(\r\n          \"¿Seguro que deseas eliminar esta venta? Se sumará el stock a los productos del detalle\"\r\n        )\r\n      ) {\r\n        this.updateStoreStock(orderId);\r\n        this.$store.dispatch(\"showOverlay\", true);\r\n        customHttpRequest(\r\n          \"delete\",\r\n          \"/api/orders/delete/\" + orderId,\r\n          null,\r\n          () => {\r\n            this.$store.dispatch(\"showOverlay\", false);\r\n            this.orders.splice(index, 1);\r\n          }\r\n        );\r\n      }\r\n    },\r\n    updateStoreStock(orderId) {\r\n      axios\r\n        .get(\"/api/order-details/list\", { params: { orderId } })\r\n        .then(res => {\r\n          console.log(res);\r\n          if (res.data.ok) {\r\n            let orderDetails = res.data.payload;\r\n            orderDetails.forEach(detail => {\r\n              this.$store.dispatch(\"updateStock\", {\r\n                type: \"order\",\r\n                productId: detail.productId,\r\n                qty: -parseInt(detail.qty)\r\n              });\r\n            });\r\n          }\r\n        })\r\n        .catch(err => {\r\n          console.error(err);\r\n        });\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./salesHistory.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./salesHistory.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./salesHistory.vue?vue&type=template&id=7cf7ac87&scoped=true&\"\nimport script from \"./salesHistory.vue?vue&type=script&lang=js&\"\nexport * from \"./salesHistory.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7cf7ac87\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VAlert } from 'vuetify/lib/components/VAlert';\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardActions } from 'vuetify/lib/components/VCard';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VDataTable } from 'vuetify/lib/components/VDataTable';\nimport { VDialog } from 'vuetify/lib/components/VDialog';\nimport { VDivider } from 'vuetify/lib/components/VDivider';\nimport { VPagination } from 'vuetify/lib/components/VPagination';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VSimpleTable } from 'vuetify/lib/components/VDataTable';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\nimport { VToolbar } from 'vuetify/lib/components/VToolbar';\nimport { VToolbarTitle } from 'vuetify/lib/components/VToolbar';\ninstallComponents(component, {VAlert,VBtn,VCard,VCardActions,VCol,VContainer,VDataTable,VDialog,VDivider,VPagination,VRow,VSimpleTable,VSpacer,VToolbar,VToolbarTitle})\n","'use strict';\nvar $ = require('../internals/export');\nvar $reduce = require('../internals/array-reduce').left;\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar STRICT_METHOD = arrayMethodIsStrict('reduce');\nvar USES_TO_LENGTH = arrayMethodUsesToLength('reduce', { 1: 0 });\n\n// `Array.prototype.reduce` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.reduce\n$({ target: 'Array', proto: true, forced: !STRICT_METHOD || !USES_TO_LENGTH }, {\n  reduce: function reduce(callbackfn /* , initialValue */) {\n    return $reduce(this, callbackfn, arguments.length, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","import store from \"../store\";\r\nimport axios from \"axios\";\r\nconst customHttpRequest = (type, url, params = null, callback = () => {}) => {\r\n    axios[type](url, params)\r\n        .then(res => {\r\n            console.log(res.data);\r\n            store.dispatch(\"showSnackbar\", {\r\n                text: res.data.message,\r\n                color: \"success\"\r\n            });\r\n            if (res.data.ok) {\r\n                callback(null, res.data.payload);\r\n            }\r\n        })\r\n        .catch(err => {\r\n            console.log(\"hubo un error en la llamada a la api\");\r\n            if (err.code === \"ECONNABORTED\") {\r\n                console.log(\"se excedio el tiempo limite\");\r\n                store.dispatch(\"showSnackbar\", {\r\n                    text: \"Algo salió mal\",\r\n                    color: \"error\"\r\n                });\r\n            }\r\n            store.dispatch(\"showSnackbar\", {\r\n                text: err.response.data.message,\r\n                color: \"error\"\r\n            });\r\n            console.error(err);\r\n            callback(err);\r\n        });\r\n}\r\n\r\nexport {\r\n    customHttpRequest\r\n}","'use strict';\nvar $ = require('../internals/export');\nvar $indexOf = require('../internals/array-includes').indexOf;\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar nativeIndexOf = [].indexOf;\n\nvar NEGATIVE_ZERO = !!nativeIndexOf && 1 / [1].indexOf(1, -0) < 0;\nvar STRICT_METHOD = arrayMethodIsStrict('indexOf');\nvar USES_TO_LENGTH = arrayMethodUsesToLength('indexOf', { ACCESSORS: true, 1: 0 });\n\n// `Array.prototype.indexOf` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.indexof\n$({ target: 'Array', proto: true, forced: NEGATIVE_ZERO || !STRICT_METHOD || !USES_TO_LENGTH }, {\n  indexOf: function indexOf(searchElement /* , fromIndex = 0 */) {\n    return NEGATIVE_ZERO\n      // convert -0 to +0\n      ? nativeIndexOf.apply(this, arguments) || 0\n      : $indexOf(this, searchElement, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","var aFunction = require('../internals/a-function');\nvar toObject = require('../internals/to-object');\nvar IndexedObject = require('../internals/indexed-object');\nvar toLength = require('../internals/to-length');\n\n// `Array.prototype.{ reduce, reduceRight }` methods implementation\nvar createMethod = function (IS_RIGHT) {\n  return function (that, callbackfn, argumentsLength, memo) {\n    aFunction(callbackfn);\n    var O = toObject(that);\n    var self = IndexedObject(O);\n    var length = toLength(O.length);\n    var index = IS_RIGHT ? length - 1 : 0;\n    var i = IS_RIGHT ? -1 : 1;\n    if (argumentsLength < 2) while (true) {\n      if (index in self) {\n        memo = self[index];\n        index += i;\n        break;\n      }\n      index += i;\n      if (IS_RIGHT ? index < 0 : length <= index) {\n        throw TypeError('Reduce of empty array with no initial value');\n      }\n    }\n    for (;IS_RIGHT ? index >= 0 : length > index; index += i) if (index in self) {\n      memo = callbackfn(memo, self[index], index, O);\n    }\n    return memo;\n  };\n};\n\nmodule.exports = {\n  // `Array.prototype.reduce` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.reduce\n  left: createMethod(false),\n  // `Array.prototype.reduceRight` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.reduceright\n  right: createMethod(true)\n};\n"],"sourceRoot":""}