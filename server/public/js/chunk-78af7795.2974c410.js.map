{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es.array.reduce.js","webpack:///./src/views/drawerPages/historyPurchase.vue?98b4","webpack:///src/views/drawerPages/historyPurchase.vue","webpack:///./src/views/drawerPages/historyPurchase.vue?fddb","webpack:///./src/views/drawerPages/historyPurchase.vue","webpack:///./src/tools/customHttpRequest.js","webpack:///./node_modules/core-js/modules/es.array.index-of.js","webpack:///./node_modules/core-js/internals/array-reduce.js"],"names":["$","$reduce","left","arrayMethodIsStrict","arrayMethodUsesToLength","STRICT_METHOD","USES_TO_LENGTH","1","target","proto","forced","reduce","callbackfn","this","arguments","length","undefined","render","_vm","_h","$createElement","_c","_self","attrs","scopedSlots","_u","key","fn","_v","_s","$store","getters","getTotalPurchases","isDataReady","headers","purchases","on","$event","pageCount","proxy","ref","item","staticClass","stopPropagation","dialog","showOrderDetail","deleteItem","_f","createdAt","model","value","callback","$$v","page","expression","selectedOrder","_id","_l","purchaseDetail","getProductById","productId","purchasePrice","qty","getTotal","clearPurchaseDetails","_e","staticRenderFns","filters","data","computed","formTitle","brands","getBrands","types","getTypes","colors","getColors","purchaseDetails","created","initialData","methods","indexOf","updateStoreStock","purchaseId","dispatch","component","VAlert","VBtn","VCard","VCardActions","VCol","VContainer","VDataTable","VDialog","VDivider","VPagination","VRow","VSimpleTable","VSpacer","VToolbar","VToolbarTitle","customHttpRequest","type","url","params","axios","then","res","console","log","store","text","message","color","ok","payload","catch","err","code","response","error","$indexOf","nativeIndexOf","NEGATIVE_ZERO","ACCESSORS","searchElement","apply","aFunction","toObject","IndexedObject","toLength","createMethod","IS_RIGHT","that","argumentsLength","memo","O","self","index","i","TypeError","module","exports","right"],"mappings":"kHACA,IAAIA,EAAI,EAAQ,QACZC,EAAU,EAAQ,QAA6BC,KAC/CC,EAAsB,EAAQ,QAC9BC,EAA0B,EAAQ,QAElCC,EAAgBF,EAAoB,UACpCG,EAAiBF,EAAwB,SAAU,CAAEG,EAAG,IAI5DP,EAAE,CAAEQ,OAAQ,QAASC,OAAO,EAAMC,QAASL,IAAkBC,GAAkB,CAC7EK,OAAQ,SAAgBC,GACtB,OAAOX,EAAQY,KAAMD,EAAYE,UAAUC,OAAQD,UAAUC,OAAS,EAAID,UAAU,QAAKE,O,2CCb7F,IAAIC,EAAS,WAAa,IAAIC,EAAIL,KAASM,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,cAAc,CAACE,MAAM,CAAC,MAAQ,uBAAuB,KAAO,0BAA0BC,YAAYN,EAAIO,GAAG,CAAC,CAACC,IAAI,UAAUC,GAAG,WAAW,MAAO,CAACN,EAAG,QAAQ,CAACE,MAAM,CAAC,KAAO,KAAK,GAAK,OAAO,CAACF,EAAG,IAAI,CAACA,EAAG,SAAS,CAACH,EAAIU,GAAG,uBAAuBV,EAAIU,GAAG,IAAIV,EAAIW,GAAGX,EAAIY,OAAOC,QAAQC,mBAAmB,SAASX,EAAG,eAAe,CAACE,MAAM,CAAC,SAAWL,EAAIe,YAAY,eAAe,iBAAiB,sBAAsB,GAAG,QAAUf,EAAIgB,QAAQ,MAAQhB,EAAIiB,WAAWC,GAAG,CAAC,aAAa,SAASC,GAAQnB,EAAIoB,UAAYD,IAASb,YAAYN,EAAIO,GAAG,CAAC,CAACC,IAAI,UAAUC,GAAG,WAAW,MAAO,CAACN,EAAG,UAAU,CAACE,MAAM,CAAC,KAAO,QAAQ,OAAQ,IAAO,CAACL,EAAIU,GAAG,kDAAkDW,OAAM,GAAM,CAACb,IAAI,eAAeC,GAAG,SAASa,GAC1zB,IAAIC,EAAOD,EAAIC,KACf,MAAO,CAACpB,EAAG,QAAQ,CAACqB,YAAY,OAAOnB,MAAM,CAAC,MAAQ,GAAG,MAAQ,aAAaa,GAAG,CAAC,MAAQ,SAASC,GAAQA,EAAOM,kBAAkBzB,EAAI0B,QAAO,EAAK1B,EAAI2B,gBAAgBJ,MAAS,CAACvB,EAAIU,GAAG,iBAAiBP,EAAG,QAAQ,CAACE,MAAM,CAAC,MAAQ,GAAG,MAAQ,SAASa,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOnB,EAAI4B,WAAWL,MAAS,CAACvB,EAAIU,GAAG,iBAAiB,CAACF,IAAI,iBAAiBC,GAAG,SAASa,GAChX,IAAIC,EAAOD,EAAIC,KACf,MAAO,CAACvB,EAAIU,GAAGV,EAAIW,GAAGX,EAAI6B,GAAG,aAAP7B,CAAqBuB,EAAKO,gBAAgB,CAACtB,IAAI,cAAcC,GAAG,WAAW,MAAO,CAACT,EAAIU,GAAG,mBAAmBW,OAAM,OAAUlB,EAAG,MAAM,CAACqB,YAAY,oBAAoB,CAACrB,EAAG,eAAe,CAACE,MAAM,CAAC,OAAS,GAAG0B,MAAM,CAACC,MAAOhC,EAAQ,KAAEiC,SAAS,SAAUC,GAAMlC,EAAImC,KAAKD,GAAKE,WAAW,WAAW,GAAGjC,EAAG,WAAW,CAACE,MAAM,CAAC,MAAQ,OAAO0B,MAAM,CAACC,MAAOhC,EAAU,OAAEiC,SAAS,SAAUC,GAAMlC,EAAI0B,OAAOQ,GAAKE,WAAW,WAAW,CAAEpC,EAAe,YAAEG,EAAG,SAAS,CAACA,EAAG,YAAY,CAACE,MAAM,CAAC,MAAQ,YAAY,KAAO,KAAK,CAACF,EAAG,kBAAkB,CAACH,EAAIU,GAAG,wBAAwB,GAAGP,EAAG,cAAc,CAACA,EAAG,IAAI,CAACA,EAAG,SAAS,CAACH,EAAIU,GAAG,sBAAsBV,EAAIU,GAAG,IAAIV,EAAIW,GAAGX,EAAIiB,UAAUpB,OAAO,EAAEG,EAAIiB,UAAUjB,EAAIqC,eAAeC,IAAI,IAAI,OAAOnC,EAAG,IAAI,CAACA,EAAG,SAAS,CAACH,EAAIU,GAAG,cAAcV,EAAIU,GAAG,qBAAqBP,EAAG,IAAI,CAACA,EAAG,SAAS,CAACH,EAAIU,GAAG,uCAAuCP,EAAG,iBAAiB,CAACG,YAAYN,EAAIO,GAAG,CAAC,CAACC,IAAI,UAAUC,GAAG,WAAW,MAAO,CAACN,EAAG,QAAQ,CAACA,EAAG,KAAK,CAACA,EAAG,KAAK,CAACqB,YAAY,aAAa,CAACxB,EAAIU,GAAG,cAAcP,EAAG,KAAK,CAACqB,YAAY,aAAa,CAACxB,EAAIU,GAAG,sBAAsBP,EAAG,KAAK,CAACqB,YAAY,aAAa,CAACxB,EAAIU,GAAG,cAAcP,EAAG,KAAK,CAACqB,YAAY,aAAa,CAACxB,EAAIU,GAAG,kBAAkBP,EAAG,QAAQH,EAAIuC,GAAIvC,EAAmB,iBAAE,SAASwC,GAAgB,OAAOrC,EAAG,KAAK,CAACK,IAAIgC,EAAeF,KAAK,CAACnC,EAAG,KAAK,CAACH,EAAIU,GAAGV,EAAIW,GAAGX,EAAIY,OAAOC,QAAQ4B,eAAeD,EAAeE,eAAevC,EAAG,KAAK,CAACH,EAAIU,GAAG,OAAOV,EAAIW,GAAG6B,EAAeG,kBAAkBxC,EAAG,KAAK,CAACH,EAAIU,GAAGV,EAAIW,GAAG6B,EAAeI,QAAQzC,EAAG,KAAK,CAACH,EAAIU,GAAG,OAAOV,EAAIW,GAAG6B,EAAeG,cAAcH,EAAeI,aAAY,KAAKvB,OAAM,IAAO,MAAK,EAAM,cAAclB,EAAG,QAAQ,CAACqB,YAAY,OAAOnB,MAAM,CAAC,QAAU,QAAQ,CAACF,EAAG,SAAS,CAACqB,YAAY,OAAOnB,MAAM,CAAC,SAAW,GAAG,MAAQ,kBAAkB,CAACF,EAAG,SAAS,CAACqB,YAAY,QAAQ,CAACxB,EAAIU,GAAG,YAAYV,EAAIU,GAAG,KAAKP,EAAG,OAAO,CAACqB,YAAY,SAAS,CAACxB,EAAIU,GAAG,MAAMV,EAAIW,GAAGX,EAAI6C,gBAAgB,IAAI,GAAG1C,EAAG,aAAaA,EAAG,iBAAiB,CAACA,EAAG,YAAYA,EAAG,QAAQ,CAACE,MAAM,CAAC,MAAQ,UAAU,KAAO,IAAIa,GAAG,CAAC,MAAQ,SAASC,GAAQnB,EAAI0B,QAAS,EAAM1B,EAAI8C,0BAA2B,CAAC9C,EAAIU,GAAG,iBAAiB,IAAI,GAAGV,EAAI+C,MAAM,KAAK1B,OAAM,QAC5mE2B,EAAkB,G,uHC2FtB,GACEC,QAAS,CACX,uBACM,OAAO,OAAb,OAAa,CAAb,4BAGEC,KAAM,WAAR,OACA,eACA,gBACA,UACA,UACA,OACA,YACA,gBACA,SACA,kCACA,gCACA,iCACA,mCAEA,aACA,qBAEEC,SAAU,CACRC,UADJ,WAEM,MAAO,mBAETC,OAJJ,WAKM,OAAO1D,KAAKiB,OAAOC,QAAQyC,WAE7BC,MAPJ,WAQM,OAAO5D,KAAKiB,OAAOC,QAAQ2C,UAE7BC,OAVJ,WAWM,OAAO9D,KAAKiB,OAAOC,QAAQ6C,WAE7Bb,SAbJ,WAcM,OAAOlD,KAAKgE,gBAAgBlE,QAClC,cAAQ,OAAR,0BACA,KAIEmE,QA3CF,WA4CIjE,KAAKkE,eAGPC,QAAS,CACP,YADJ,WACA,wKAKA,0CALA,OAKA,YALA,OAOA,iBAPA,8CASInC,gBAVJ,SAUA,cACMhC,KAAK0C,cAAgB1C,KAAKsB,UAAU8C,QAAQxC,GAC5C,IAAN,yCACM,EAAN,EACA,kCAAQ,OAAR,iBACA,kBACQ,QAAR,OACA,YACU,EAAV,mCAGA,mBACQ,QAAR,aAGIuB,qBAzBJ,WA0BMnD,KAAKgE,gBAAkB,IAEzB/B,WA5BJ,SA4BA,cACA,4BACA,wBAEA,QACA,6FAGQjC,KAAKqE,iBAAiBC,GACtBtE,KAAKiB,OAAOsD,SAAS,eAAe,GACpC,OAAR,OAAQ,CACR,SACA,2BACA,MACA,WACU,EAAV,kCACU,EAAV,2BAKIF,iBAjDJ,SAiDA,cACM,EAAN,EACA,kCAAQ,OAAR,iBACA,kBAEQ,GADA,QAAR,OACA,WACU,IAAV,iBACU,EAAV,qBACY,EAAZ,+BACc,KAAd,WACc,UAAd,YACc,KAAd,yBAKA,mBACQ,QAAR,eCjNwW,I,qNCOpWG,EAAY,eACd,EACApE,EACAiD,GACA,EACA,KACA,WACA,MAIa,aAAAmB,EAAiB,QAmBhC,IAAkBA,EAAW,CAACC,SAAA,KAAOC,OAAA,KAAKC,QAAA,KAAMC,aAAA,OAAaC,OAAA,KAAKC,aAAA,KAAWC,aAAA,KAAWC,UAAA,KAAQC,WAAA,KAASC,cAAA,KAAYC,OAAA,KAAKC,eAAA,KAAaC,UAAA,KAAQC,WAAA,KAASC,cAAA,U,kCCrCxJ,uEAEMC,EAAoB,SAACC,EAAMC,GAA4C,IAAvCC,EAAuC,uDAA9B,KAAMrD,EAAwB,uDAAb,aAC5DsD,IAAMH,GAAMC,EAAKC,GACZE,MAAK,SAAAC,GACFC,QAAQC,IAAIF,EAAIvC,MAChB0C,OAAM1B,SAAS,eAAgB,CAC3B2B,KAAMJ,EAAIvC,KAAK4C,QACfC,MAAO,YAEPN,EAAIvC,KAAK8C,IACT/D,EAAS,KAAMwD,EAAIvC,KAAK+C,YAG/BC,OAAM,SAAAC,GACHT,QAAQC,IAAI,wCACK,iBAAbQ,EAAIC,OACJV,QAAQC,IAAI,+BACZC,OAAM1B,SAAS,eAAgB,CAC3B2B,KAAM,iBACNE,MAAO,WAGfH,OAAM1B,SAAS,eAAgB,CAC3B2B,KAAMM,EAAIE,SAASnD,KAAK4C,QACxBC,MAAO,UAEXL,QAAQY,MAAMH,GACdlE,EAASkE,Q,kCC3BrB,IAAIrH,EAAI,EAAQ,QACZyH,EAAW,EAAQ,QAA+BxC,QAClD9E,EAAsB,EAAQ,QAC9BC,EAA0B,EAAQ,QAElCsH,EAAgB,GAAGzC,QAEnB0C,IAAkBD,GAAiB,EAAI,CAAC,GAAGzC,QAAQ,GAAI,GAAK,EAC5D5E,EAAgBF,EAAoB,WACpCG,EAAiBF,EAAwB,UAAW,CAAEwH,WAAW,EAAMrH,EAAG,IAI9EP,EAAE,CAAEQ,OAAQ,QAASC,OAAO,EAAMC,OAAQiH,IAAkBtH,IAAkBC,GAAkB,CAC9F2E,QAAS,SAAiB4C,GACxB,OAAOF,EAEHD,EAAcI,MAAMjH,KAAMC,YAAc,EACxC2G,EAAS5G,KAAMgH,EAAe/G,UAAUC,OAAS,EAAID,UAAU,QAAKE,O,qBCnB5E,IAAI+G,EAAY,EAAQ,QACpBC,EAAW,EAAQ,QACnBC,EAAgB,EAAQ,QACxBC,EAAW,EAAQ,QAGnBC,EAAe,SAAUC,GAC3B,OAAO,SAAUC,EAAMzH,EAAY0H,EAAiBC,GAClDR,EAAUnH,GACV,IAAI4H,EAAIR,EAASK,GACbI,EAAOR,EAAcO,GACrBzH,EAASmH,EAASM,EAAEzH,QACpB2H,EAAQN,EAAWrH,EAAS,EAAI,EAChC4H,EAAIP,GAAY,EAAI,EACxB,GAAIE,EAAkB,EAAG,MAAO,EAAM,CACpC,GAAII,KAASD,EAAM,CACjBF,EAAOE,EAAKC,GACZA,GAASC,EACT,MAGF,GADAD,GAASC,EACLP,EAAWM,EAAQ,EAAI3H,GAAU2H,EACnC,MAAME,UAAU,+CAGpB,KAAMR,EAAWM,GAAS,EAAI3H,EAAS2H,EAAOA,GAASC,EAAOD,KAASD,IACrEF,EAAO3H,EAAW2H,EAAME,EAAKC,GAAQA,EAAOF,IAE9C,OAAOD,IAIXM,EAAOC,QAAU,CAGf5I,KAAMiI,GAAa,GAGnBY,MAAOZ,GAAa","file":"js/chunk-78af7795.2974c410.js","sourcesContent":["'use strict';\nvar $ = require('../internals/export');\nvar $reduce = require('../internals/array-reduce').left;\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar STRICT_METHOD = arrayMethodIsStrict('reduce');\nvar USES_TO_LENGTH = arrayMethodUsesToLength('reduce', { 1: 0 });\n\n// `Array.prototype.reduce` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.reduce\n$({ target: 'Array', proto: true, forced: !STRICT_METHOD || !USES_TO_LENGTH }, {\n  reduce: function reduce(callbackfn /* , initialValue */) {\n    return $reduce(this, callbackfn, arguments.length, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('custom-card',{attrs:{\"title\":\"Historial de compras\",\"icon\":\"mdi-format-list-checks\"},scopedSlots:_vm._u([{key:\"content\",fn:function(){return [_c('v-col',{attrs:{\"cols\":\"12\",\"sm\":\"12\"}},[_c('p',[_c('strong',[_vm._v(\"Total de compras:\")]),_vm._v(\" \"+_vm._s(_vm.$store.getters.getTotalPurchases)+\" \")])]),_c('v-data-table',{attrs:{\"loading\":!_vm.isDataReady,\"loading-text\":\"Cargando datos\",\"hide-default-footer\":\"\",\"headers\":_vm.headers,\"items\":_vm.purchases},on:{\"page-count\":function($event){_vm.pageCount = $event}},scopedSlots:_vm._u([{key:\"no-data\",fn:function(){return [_c('v-alert',{attrs:{\"type\":\"error\",\"value\":true}},[_vm._v(\"AÃºn no cuentas con un historial de compras\")])]},proxy:true},{key:\"item.actions\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('v-btn',{staticClass:\"mr-3\",attrs:{\"small\":\"\",\"color\":\"secondary\"},on:{\"click\":function($event){$event.stopPropagation();_vm.dialog=true;_vm.showOrderDetail(item)}}},[_vm._v(\"Ver detalle\")]),_c('v-btn',{attrs:{\"small\":\"\",\"color\":\"error\"},on:{\"click\":function($event){return _vm.deleteItem(item)}}},[_vm._v(\"Eliminar\")])]}},{key:\"item.createdAt\",fn:function(ref){\nvar item = ref.item;\nreturn [_vm._v(_vm._s(_vm._f(\"formatDate\")(item.createdAt)))]}},{key:\"item.userId\",fn:function(){return [_vm._v(\"Administrador\")]},proxy:true}])}),_c('div',{staticClass:\"text-center pt-2\"},[_c('v-pagination',{attrs:{\"length\":1},model:{value:(_vm.page),callback:function ($$v) {_vm.page=$$v},expression:\"page\"}})],1),_c('v-dialog',{attrs:{\"width\":\"500\"},model:{value:(_vm.dialog),callback:function ($$v) {_vm.dialog=$$v},expression:\"dialog\"}},[(_vm.isDataReady)?_c('v-card',[_c('v-toolbar',{attrs:{\"color\":\"secondary\",\"dark\":\"\"}},[_c('v-toolbar-title',[_vm._v(\"Detalle de compra\")])],1),_c('v-container',[_c('p',[_c('strong',[_vm._v(\"ID de la compra:\")]),_vm._v(\" \"+_vm._s(_vm.purchases.length>0?_vm.purchases[_vm.selectedOrder]._id:\"\")+\" \")]),_c('p',[_c('strong',[_vm._v(\"Usuario:\")]),_vm._v(\" Administrador \")]),_c('p',[_c('strong',[_vm._v(\"Detalle de productos comprados:\")])]),_c('v-simple-table',{scopedSlots:_vm._u([{key:\"default\",fn:function(){return [_c('thead',[_c('tr',[_c('th',{staticClass:\"text-left\"},[_vm._v(\"Producto\")]),_c('th',{staticClass:\"text-left\"},[_vm._v(\"Precio de compra\")]),_c('th',{staticClass:\"text-left\"},[_vm._v(\"Cantidad\")]),_c('th',{staticClass:\"text-left\"},[_vm._v(\"Subtotal\")])])]),_c('tbody',_vm._l((_vm.purchaseDetails),function(purchaseDetail){return _c('tr',{key:purchaseDetail._id},[_c('td',[_vm._v(_vm._s(_vm.$store.getters.getProductById(purchaseDetail.productId)))]),_c('td',[_vm._v(\"S/. \"+_vm._s(purchaseDetail.purchasePrice))]),_c('td',[_vm._v(_vm._s(purchaseDetail.qty))]),_c('td',[_vm._v(\"S/. \"+_vm._s(purchaseDetail.purchasePrice*purchaseDetail.qty))])])}),0)]},proxy:true}],null,false,2332756782)}),_c('v-row',{staticClass:\"mr-3\",attrs:{\"justify\":\"end\"}},[_c('v-card',{staticClass:\"pa-3\",attrs:{\"outlined\":\"\",\"color\":\"red lighten-5\"}},[_c('strong',{staticClass:\"mr-3\"},[_vm._v(\"Total:\")]),_vm._v(\" \"),_c('span',{staticClass:\"total\"},[_vm._v(\"S/.\"+_vm._s(_vm.getTotal))])])],1)],1),_c('v-divider'),_c('v-card-actions',[_c('v-spacer'),_c('v-btn',{attrs:{\"color\":\"primary\",\"text\":\"\"},on:{\"click\":function($event){_vm.dialog = false;_vm.clearPurchaseDetails();}}},[_vm._v(\"De acuerdo\")])],1)],1):_vm._e()],1)]},proxy:true}])})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <custom-card title=\"Historial de compras\" icon=\"mdi-format-list-checks\">\r\n    <template v-slot:content>\r\n      <v-col cols=\"12\" sm=\"12\">\r\n        <p>\r\n          <strong>Total de compras:</strong>\r\n          {{$store.getters.getTotalPurchases}}\r\n        </p>\r\n      </v-col>\r\n      <v-data-table\r\n        :loading=\"!isDataReady\"\r\n        loading-text=\"Cargando datos\"\r\n        hide-default-footer\r\n        :headers=\"headers\"\r\n        :items=\"purchases\"\r\n        @page-count=\"pageCount = $event\"\r\n      >\r\n        <template v-slot:no-data>\r\n          <v-alert type=\"error\" :value=\"true\">AÃºn no cuentas con un historial de compras</v-alert>\r\n        </template>\r\n        <template v-slot:item.actions=\"{item}\">\r\n          <v-btn\r\n            small\r\n            color=\"secondary\"\r\n            class=\"mr-3\"\r\n            @click.stop=\"dialog=true;showOrderDetail(item)\"\r\n          >Ver detalle</v-btn>\r\n          <v-btn small color=\"error\" @click=\"deleteItem(item)\">Eliminar</v-btn>\r\n        </template>\r\n        <template v-slot:item.createdAt=\"{ item }\">{{item.createdAt | formatDate}}</template>\r\n        <template v-slot:item.userId>Administrador</template>\r\n      </v-data-table>\r\n      <div class=\"text-center pt-2\">\r\n        <v-pagination v-model=\"page\" :length=\"1\"></v-pagination>\r\n      </div>\r\n      <v-dialog v-model=\"dialog\" width=\"500\">\r\n        <v-card v-if=\"isDataReady\">\r\n          <v-toolbar color=\"secondary\" dark>\r\n            <v-toolbar-title>Detalle de compra</v-toolbar-title>\r\n          </v-toolbar>\r\n          <v-container>\r\n            <p>\r\n              <strong>ID de la compra:</strong>\r\n              {{purchases.length>0?purchases[selectedOrder]._id:\"\"}}\r\n            </p>\r\n            <p>\r\n              <strong>Usuario:</strong>\r\n              <!-- {{purchases.length>0?purchases[selectedOrder].userId:\"\"}} -->\r\n              Administrador\r\n            </p>\r\n            <p>\r\n              <strong>Detalle de productos comprados:</strong>\r\n            </p>\r\n            <v-simple-table>\r\n              <template v-slot:default>\r\n                <thead>\r\n                  <tr>\r\n                    <th class=\"text-left\">Producto</th>\r\n                    <th class=\"text-left\">Precio de compra</th>\r\n                    <th class=\"text-left\">Cantidad</th>\r\n                    <th class=\"text-left\">Subtotal</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  <tr v-for=\"purchaseDetail in purchaseDetails\" :key=\"purchaseDetail._id\">\r\n                    <td>{{ $store.getters.getProductById(purchaseDetail.productId) }}</td>\r\n                    <td>S/. {{ purchaseDetail.purchasePrice }}</td>\r\n                    <td>{{ purchaseDetail.qty }}</td>\r\n                    <td>S/. {{ purchaseDetail.purchasePrice*purchaseDetail.qty }}</td>\r\n                  </tr>\r\n                </tbody>\r\n              </template>\r\n            </v-simple-table>\r\n            <v-row justify=\"end\" class=\"mr-3\">\r\n              <v-card outlined color=\"red lighten-5\" class=\"pa-3\">\r\n                <strong class=\"mr-3\">Total:</strong>\r\n                &nbsp;\r\n                <span class=\"total\">S/.{{getTotal}}</span>\r\n              </v-card>\r\n            </v-row>\r\n          </v-container>\r\n          <v-divider></v-divider>\r\n          <v-card-actions>\r\n            <v-spacer></v-spacer>\r\n            <v-btn color=\"primary\" text @click=\"dialog = false;clearPurchaseDetails();\">De acuerdo</v-btn>\r\n          </v-card-actions>\r\n        </v-card>\r\n      </v-dialog>\r\n    </template>\r\n  </custom-card>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\nimport { format} from \"date-fns\";\r\nimport { customHttpRequest } from \"../../tools/customHttpRequest\";\r\nexport default {\r\n  filters: {\r\n   formatDate: function(value) {\r\n      return format(new Date(value), \"dd/MM/yyyy\");\r\n    }\r\n  },\r\n  data: () => ({\r\n    isDataReady: false,\r\n    selectedOrder: 0,\r\n    search: \"\",\r\n    dialog: false,\r\n    page: 1,\r\n    pageCount: 0,\r\n    itemsPerPage: 10,\r\n    headers: [\r\n      { text: \"ID de compra\", value: \"_id\" },\r\n      { text: \"Usuario\", value: \"userId\" },\r\n      { text: \"Fecha\", value: \"createdAt\" },\r\n      { text: \"Acciones\", value: \"actions\" }\r\n    ],\r\n    purchases: [],\r\n    purchaseDetails: []\r\n  }),\r\n  computed: {\r\n    formTitle() {\r\n      return \"Editar producto\";\r\n    },\r\n    brands() {\r\n      return this.$store.getters.getBrands;\r\n    },\r\n    types() {\r\n      return this.$store.getters.getTypes;\r\n    },\r\n    colors() {\r\n      return this.$store.getters.getColors;\r\n    },\r\n    getTotal() {\r\n      return this.purchaseDetails.reduce(\r\n        (a, b) => a + b.purchasePrice * b.qty,\r\n        0\r\n      );\r\n    }\r\n  },\r\n  created() {\r\n    this.initialData();\r\n  },\r\n\r\n  methods: {\r\n    async initialData() {\r\n      // let purchases = this.$store.getters.getPurchases;\r\n      // if (purchases.length > 0) {\r\n      // this.purchases = customCopyObject(purchases);\r\n      // } else {\r\n      this.purchases = await this.$store.dispatch(\"loadInitialPurchases\");\r\n      // }\r\n      this.isDataReady = true;\r\n    },\r\n    showOrderDetail(item) {\r\n      this.selectedOrder = this.purchases.indexOf(item);\r\n      let purchaseId = this.purchases[this.selectedOrder]._id;\r\n      axios\r\n        .get(\"/api/purchase-details/list\", { params: { purchaseId } })\r\n        .then(res => {\r\n          console.log(res);\r\n          if (res.data.ok) {\r\n            this.purchaseDetails = res.data.payload;\r\n          }\r\n        })\r\n        .catch(err => {\r\n          console.error(err);\r\n        });\r\n    },\r\n    clearPurchaseDetails() {\r\n      this.purchaseDetails = [];\r\n    },\r\n    deleteItem(item) {\r\n      const index = this.purchases.indexOf(item);\r\n      let purchaseId = this.purchases[index]._id;\r\n      if (\r\n        confirm(\r\n          \"Â¿Seguro que deseas eliminar esta compra? Se sumarÃ¡ el stock a los productos del detalle\"\r\n        )\r\n      ) {\r\n        this.updateStoreStock(purchaseId);\r\n        this.$store.dispatch(\"showOverlay\", true);\r\n        customHttpRequest(\r\n          \"delete\",\r\n          \"/api/purchases/delete/\" + purchaseId,\r\n          null,\r\n          () => {\r\n            this.$store.dispatch(\"showOverlay\", false);\r\n            this.purchases.splice(index, 1);\r\n          }\r\n        );\r\n      }\r\n    },\r\n    updateStoreStock(purchaseId) {\r\n      axios\r\n        .get(\"/api/purchase-details/list\", { params: { purchaseId } })\r\n        .then(res => {\r\n          console.log(res);\r\n          if (res.data.ok) {\r\n            let purchaseDetails = res.data.payload;\r\n            purchaseDetails.forEach(detail => {\r\n              this.$store.dispatch(\"updateStock\", {\r\n                type: \"purchase\",\r\n                productId: detail.productId,\r\n                qty: -parseInt(detail.qty)\r\n              });\r\n            });\r\n          }\r\n        })\r\n        .catch(err => {\r\n          console.error(err);\r\n        });\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./historyPurchase.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./historyPurchase.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./historyPurchase.vue?vue&type=template&id=51df5bee&scoped=true&\"\nimport script from \"./historyPurchase.vue?vue&type=script&lang=js&\"\nexport * from \"./historyPurchase.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"51df5bee\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VAlert } from 'vuetify/lib/components/VAlert';\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardActions } from 'vuetify/lib/components/VCard';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VDataTable } from 'vuetify/lib/components/VDataTable';\nimport { VDialog } from 'vuetify/lib/components/VDialog';\nimport { VDivider } from 'vuetify/lib/components/VDivider';\nimport { VPagination } from 'vuetify/lib/components/VPagination';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VSimpleTable } from 'vuetify/lib/components/VDataTable';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\nimport { VToolbar } from 'vuetify/lib/components/VToolbar';\nimport { VToolbarTitle } from 'vuetify/lib/components/VToolbar';\ninstallComponents(component, {VAlert,VBtn,VCard,VCardActions,VCol,VContainer,VDataTable,VDialog,VDivider,VPagination,VRow,VSimpleTable,VSpacer,VToolbar,VToolbarTitle})\n","import store from \"../store\";\r\nimport axios from \"axios\";\r\nconst customHttpRequest = (type, url, params = null, callback = () => {}) => {\r\n    axios[type](url, params)\r\n        .then(res => {\r\n            console.log(res.data);\r\n            store.dispatch(\"showSnackbar\", {\r\n                text: res.data.message,\r\n                color: \"success\"\r\n            });\r\n            if (res.data.ok) {\r\n                callback(null, res.data.payload);\r\n            }\r\n        })\r\n        .catch(err => {\r\n            console.log(\"hubo un error en la llamada a la api\");\r\n            if (err.code === \"ECONNABORTED\") {\r\n                console.log(\"se excedio el tiempo limite\");\r\n                store.dispatch(\"showSnackbar\", {\r\n                    text: \"Algo saliÃ³ mal\",\r\n                    color: \"error\"\r\n                });\r\n            }\r\n            store.dispatch(\"showSnackbar\", {\r\n                text: err.response.data.message,\r\n                color: \"error\"\r\n            });\r\n            console.error(err);\r\n            callback(err);\r\n        });\r\n}\r\n\r\nexport {\r\n    customHttpRequest\r\n}","'use strict';\nvar $ = require('../internals/export');\nvar $indexOf = require('../internals/array-includes').indexOf;\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar nativeIndexOf = [].indexOf;\n\nvar NEGATIVE_ZERO = !!nativeIndexOf && 1 / [1].indexOf(1, -0) < 0;\nvar STRICT_METHOD = arrayMethodIsStrict('indexOf');\nvar USES_TO_LENGTH = arrayMethodUsesToLength('indexOf', { ACCESSORS: true, 1: 0 });\n\n// `Array.prototype.indexOf` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.indexof\n$({ target: 'Array', proto: true, forced: NEGATIVE_ZERO || !STRICT_METHOD || !USES_TO_LENGTH }, {\n  indexOf: function indexOf(searchElement /* , fromIndex = 0 */) {\n    return NEGATIVE_ZERO\n      // convert -0 to +0\n      ? nativeIndexOf.apply(this, arguments) || 0\n      : $indexOf(this, searchElement, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","var aFunction = require('../internals/a-function');\nvar toObject = require('../internals/to-object');\nvar IndexedObject = require('../internals/indexed-object');\nvar toLength = require('../internals/to-length');\n\n// `Array.prototype.{ reduce, reduceRight }` methods implementation\nvar createMethod = function (IS_RIGHT) {\n  return function (that, callbackfn, argumentsLength, memo) {\n    aFunction(callbackfn);\n    var O = toObject(that);\n    var self = IndexedObject(O);\n    var length = toLength(O.length);\n    var index = IS_RIGHT ? length - 1 : 0;\n    var i = IS_RIGHT ? -1 : 1;\n    if (argumentsLength < 2) while (true) {\n      if (index in self) {\n        memo = self[index];\n        index += i;\n        break;\n      }\n      index += i;\n      if (IS_RIGHT ? index < 0 : length <= index) {\n        throw TypeError('Reduce of empty array with no initial value');\n      }\n    }\n    for (;IS_RIGHT ? index >= 0 : length > index; index += i) if (index in self) {\n      memo = callbackfn(memo, self[index], index, O);\n    }\n    return memo;\n  };\n};\n\nmodule.exports = {\n  // `Array.prototype.reduce` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.reduce\n  left: createMethod(false),\n  // `Array.prototype.reduceRight` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.reduceright\n  right: createMethod(true)\n};\n"],"sourceRoot":""}