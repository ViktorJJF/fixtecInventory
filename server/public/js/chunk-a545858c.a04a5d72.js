(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a545858c"],{"1148d":function(t,e,r){"use strict";var o=r("a691"),a=r("1d80");t.exports="".repeat||function(t){var e=String(a(this)),r="",n=o(t);if(n<0||n==1/0)throw RangeError("Wrong number of repetitions");for(;n>0;(n>>>=1)&&(e+=e))1&n&&(r+=e);return r}},"13d5":function(t,e,r){"use strict";var o=r("23e7"),a=r("d58f").left,n=r("a640"),i=r("ae40"),c=n("reduce"),s=i("reduce",{1:0});o({target:"Array",proto:!0,forced:!c||!s},{reduce:function(t){return a(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"3ca3":function(t,e,r){"use strict";var o=r("6547").charAt,a=r("69f3"),n=r("7dd0"),i="String Iterator",c=a.set,s=a.getterFor(i);n(String,"String",(function(t){c(this,{type:i,string:String(t),index:0})}),(function(){var t,e=s(this),r=e.string,a=e.index;return a>=r.length?{value:void 0,done:!0}:(t=o(r,a),e.index+=t.length,{value:t,done:!1})}))},"3d8b":function(t,e,r){"use strict";var o=r("4fee"),a=r.n(o);a.a},"408a":function(t,e,r){var o=r("c6b6");t.exports=function(t){if("number"!=typeof t&&"Number"!=o(t))throw TypeError("Incorrect invocation");return+t}},"4df4":function(t,e,r){"use strict";var o=r("0366"),a=r("7b0b"),n=r("9bdd"),i=r("e95a"),c=r("50c4"),s=r("8418"),l=r("35a1");t.exports=function(t){var e,r,u,d,f,p,v=a(t),h="function"==typeof this?this:Array,m=arguments.length,y=m>1?arguments[1]:void 0,b=void 0!==y,g=l(v),w=0;if(b&&(y=o(y,m>2?arguments[2]:void 0,2)),void 0==g||h==Array&&i(g))for(e=c(v.length),r=new h(e);e>w;w++)p=b?y(v[w],w):v[w],s(r,w,p);else for(d=g.call(v),f=d.next,r=new h;!(u=f.call(d)).done;w++)p=b?n(d,y,[u.value,w],!0):u.value,s(r,w,p);return r.length=w,r}},"4fee":function(t,e,r){},a630:function(t,e,r){var o=r("23e7"),a=r("4df4"),n=r("1c7e"),i=!n((function(t){Array.from(t)}));o({target:"Array",stat:!0,forced:i},{from:a})},b680:function(t,e,r){"use strict";var o=r("23e7"),a=r("a691"),n=r("408a"),i=r("1148d"),c=r("d039"),s=1..toFixed,l=Math.floor,u=function(t,e,r){return 0===e?r:e%2===1?u(t,e-1,r*t):u(t*t,e/2,r)},d=function(t){var e=0,r=t;while(r>=4096)e+=12,r/=4096;while(r>=2)e+=1,r/=2;return e},f=s&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!c((function(){s.call({})}));o({target:"Number",proto:!0,forced:f},{toFixed:function(t){var e,r,o,c,s=n(this),f=a(t),p=[0,0,0,0,0,0],v="",h="0",m=function(t,e){var r=-1,o=e;while(++r<6)o+=t*p[r],p[r]=o%1e7,o=l(o/1e7)},y=function(t){var e=6,r=0;while(--e>=0)r+=p[e],p[e]=l(r/t),r=r%t*1e7},b=function(){var t=6,e="";while(--t>=0)if(""!==e||0===t||0!==p[t]){var r=String(p[t]);e=""===e?r:e+i.call("0",7-r.length)+r}return e};if(f<0||f>20)throw RangeError("Incorrect fraction digits");if(s!=s)return"NaN";if(s<=-1e21||s>=1e21)return String(s);if(s<0&&(v="-",s=-s),s>1e-21)if(e=d(s*u(2,69,1))-69,r=e<0?s*u(2,-e,1):s/u(2,e,1),r*=4503599627370496,e=52-e,e>0){m(0,r),o=f;while(o>=7)m(1e7,0),o-=7;m(u(10,o,1),0),o=e-1;while(o>=23)y(1<<23),o-=23;y(1<<o),m(1,1),y(2),h=b()}else m(0,r),m(1<<-e,0),h=b()+i.call("0",f);return f>0?(c=h.length,h=v+(c<=f?"0."+i.call("0",f-c)+h:h.slice(0,c-f)+"."+h.slice(c-f))):h=v+h,h}})},b85c:function(t,e,r){"use strict";r.d(e,"a",(function(){return n}));r("a4d3"),r("e01a"),r("d28b"),r("d3b7"),r("3ca3"),r("ddb0"),r("a630"),r("fb6a"),r("b0c0"),r("25f0");function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,o=new Array(e);r<e;r++)o[r]=t[r];return o}function a(t,e){if(t){if("string"===typeof t)return o(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(t,e):void 0}}function n(t,e){var r;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=a(t))||e&&t&&"number"===typeof t.length){r&&(t=r);var o=0,n=function(){};return{s:n,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c=!0,s=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return c=t.done,t},e:function(t){s=!0,i=t},f:function(){try{c||null==r["return"]||r["return"]()}finally{if(s)throw i}}}}},d28b:function(t,e,r){var o=r("746f");o("iterator")},d58f:function(t,e,r){var o=r("1c0b"),a=r("7b0b"),n=r("44ad"),i=r("50c4"),c=function(t){return function(e,r,c,s){o(r);var l=a(e),u=n(l),d=i(l.length),f=t?d-1:0,p=t?-1:1;if(c<2)while(1){if(f in u){s=u[f],f+=p;break}if(f+=p,t?f<0:d<=f)throw TypeError("Reduce of empty array with no initial value")}for(;t?f>=0:d>f;f+=p)f in u&&(s=r(s,u[f],f,l));return s}};t.exports={left:c(!1),right:c(!0)}},e01a:function(t,e,r){"use strict";var o=r("23e7"),a=r("83ab"),n=r("da84"),i=r("5135"),c=r("861d"),s=r("9bf2").f,l=r("e893"),u=n.Symbol;if(a&&"function"==typeof u&&(!("description"in u.prototype)||void 0!==u().description)){var d={},f=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof f?new u(t):void 0===t?u():u(t);return""===t&&(d[e]=!0),e};l(f,u);var p=f.prototype=u.prototype;p.constructor=f;var v=p.toString,h="Symbol(test)"==String(u("test")),m=/^Symbol\((.*)\)[^)]+$/;s(p,"description",{configurable:!0,get:function(){var t=c(this)?this.valueOf():this,e=v.call(t);if(i(d,t))return"";var r=h?e.slice(7,-1):e.replace(m,"$1");return""===r?void 0:r}}),o({global:!0,forced:!0},{Symbol:f})}},f32d:function(t,e,r){"use strict";r.r(e);var o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("custom-card",{attrs:{title:"Realizar compra",icon:"mdi-plus"},scopedSlots:t._u([{key:"content",fn:function(){return[r("v-container",[r("v-alert",{directives:[{name:"show",rawName:"v-show",value:t.historyMode,expression:"historyMode"}],attrs:{prominent:"",type:"error"}},[r("v-col",{staticClass:"grow"},[t._v("Aviso: Estás en el modo de compras históricas, por lo que las compras que registres no modificarán tu stock actual.")])],1),r("v-row",{attrs:{align:"center",dense:""}},[r("p",{staticClass:"body-1 font-weight-bold d-inline mx-3"},[t._v("Fecha:")]),r("v-col",{attrs:{cols:"12",sm:"12",md:"3"}},[r("v-text-field",{staticClass:"date-width",attrs:{outlined:"",dense:"","prepend-icon":"event",type:"date"},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1),r("v-col",{staticClass:"d-flex",attrs:{cols:"12",sm:"4"}},[r("v-select",{attrs:{items:t.commerce,label:"Selecciona el negocio",outlined:"",dense:""},model:{value:t.selectedCommerce,callback:function(e){t.selectedCommerce=e},expression:"selectedCommerce"}})],1),r("v-spacer"),r("v-switch",{staticClass:"mb-5",attrs:{label:"Modo histórico: "+(t.historyMode?"Activo":"Inactivo")},model:{value:t.historyMode,callback:function(e){t.historyMode=e},expression:"historyMode"}})],1),r("v-dialog",{attrs:{width:"1200"},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on;return[r("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[r("v-btn",t._g({staticClass:"my-3 mr-3",attrs:{tile:"",color:"primary"}},Object.assign({},a,o)),[r("v-icon",{attrs:{left:""}},[t._v("search")]),t._v("Agregar producto ")],1)]}}],null,!0)},[r("span",[t._v("Inventario")])])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[r("v-card",[r("v-toolbar",{attrs:{color:"primary",dark:""}},[r("v-toolbar-title",[t._v("Productos")])],1),r("v-container",[r("products",{attrs:{selectButton:!0},on:{"add-product":t.addPurchase}})],1),r("v-divider"),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"primary",text:""},on:{click:function(e){t.dialog=!1}}},[t._v("De acuerdo")])],1)],1)],1),r("v-btn",{attrs:{outlined:"",color:"primary",to:{name:"historyPurchase"}}},[r("v-icon",{attrs:{left:""}},[t._v("mdi-format-list-checks")]),t._v("Ver historial ")],1),r("v-simple-table",{scopedSlots:t._u([{key:"default",fn:function(){return[r("thead",[r("tr",[r("th",{staticClass:"text-left"},[r("span",[t._v("Tipo")])]),r("th",{staticClass:"text-left"},[r("span",[t._v("Producto")])]),r("th",{staticClass:"text-left"},[r("span",[t._v("Marca")])]),r("th",{staticClass:"text-left"},[r("span",[t._v("Cantidad")])]),r("th",{staticClass:"text-left"},[r("span",[t._v("Precio de compra")])]),r("th",{staticClass:"text-left"},[r("span",[t._v("Subtotal")])]),r("th",{staticClass:"text-left"},[r("span",[t._v("Eliminar producto")])])])]),r("tbody",t._l(t.purchases,(function(e,o){return r("tr",{key:"a"+o},[r("td",[t._v(t._s(e.productDetails.typeId?e.productDetails.typeId.name:"Sin tipo"))]),r("td",[t._v(t._s(e.productDetails.name))]),r("td",[t._v(t._s(e.productDetails.brandId?e.productDetails.brandId.name:"Sin Marca"))]),r("td",[r("v-text-field",{staticClass:"inputs-width",attrs:{suffix:"unidades",type:"number"},model:{value:e.qty,callback:function(r){t.$set(e,"qty",r)},expression:"product.qty"}})],1),r("td",[r("v-text-field",{staticClass:"inputs-width",attrs:{prefix:"S/.",type:"number"},model:{value:e.purchasePrice,callback:function(r){t.$set(e,"purchasePrice",r)},expression:"product.purchasePrice"}})],1),r("td",[t._v("S/."+t._s((e.purchasePrice*e.qty).toFixed(2)))]),r("td",[r("v-btn",{attrs:{small:"",color:"error"},on:{click:function(e){return t.deletePurchase(o)}}},[t._v("Eliminar")])],1)])})),0)]},proxy:!0}])}),r("v-alert",{directives:[{name:"show",rawName:"v-show",value:0==t.purchases.length,expression:"purchases.length==0"}],staticClass:"my-5",attrs:{type:"warning",text:""}},[t._v("Aún no agregaste productos a esta compra")]),r("v-row",{staticClass:"mr-3 mb-3",attrs:{justify:"end"}},[r("v-card",{staticClass:"pa-3",attrs:{dark:"",outlined:"",color:"info"}},[r("strong",{staticClass:"text--white"},[t._v("Total:")]),t._v(" "),r("span",{staticClass:"total"},[t._v("S/."+t._s(t.getTotal))])])],1),r("v-btn",{attrs:{loading:t.loadingButton,color:"success"},on:{click:function(e){return t.savePurchase(t.purchases,t.date,t.selectedCommerce)}}},[t._v("Terminar compra")])],1)]},proxy:!0}])})},a=[],n=(r("13d5"),r("a434"),r("b680"),r("b85c")),i=(r("96cf"),r("1da1")),c=r("d101"),s={components:{products:c["a"]},data:function(){return{dialog:null,commerce:["VENTA DE ACCESORIOS","VENTA DE REPUESTOS","SOFTWARE","HARDWARE","CELULARES"],selectedCommerce:"",historyMode:!1,selectedProduct:null,date:(new Date).toISOString().substr(0,10),menu:!1,purchases:[],total:0,productsLoading:!1,loadingButton:!1}},methods:{deletePurchase:function(t){this.purchases.splice(t,1)},addPurchase:function(t){t&&(this.purchases.push({productDetails:t,productId:t._id,qty:1,purchasePrice:t.purchasePrice,history:this.historyMode}),this.dialog=!1)},savePurchase:function(t,e,r){var o=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var i,c,s,l,u,d,f,p,v,h,m,y;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:o.loadingButton=!0,t=o.$deepCopy(t),i=Object(n["a"])(t);try{for(i.s();!(c=i.n()).done;)s=c.value,delete s["productDetails"]}catch(b){i.e(b)}finally{i.f()}if(o.historyMode){l=Object(n["a"])(t);try{for(l.s();!(u=l.n()).done;)d=u.value,d.history=!0}catch(b){l.e(b)}finally{l.f()}}else{f=Object(n["a"])(t);try{for(f.s();!(p=f.n()).done;)v=p.value,v.history=!1}catch(b){f.e(b)}finally{f.f()}}return a.prev=5,e=new Date(e),e=new Date(e.getTime()- -6e4*e.getTimezoneOffset()),a.next=10,o.$store.dispatch("purchasesModule/create",{history:o.historyMode,products:t,date:e,commerce:r});case 10:h=Object(n["a"])(t);try{for(h.s();!(m=h.n()).done;)y=m.value,y.history||o.$store.commit("productsModule/updateStock",{productId:y.productId,qty:+y.qty})}catch(b){h.e(b)}finally{h.f()}o.purchases=[];case 13:return a.prev=13,o.loadingButton=!1,a.finish(13);case 16:case"end":return a.stop()}}),a,null,[[5,,13,16]])})))()},productsList:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(0!==t.products.length){e.next=8;break}return t.productsLoading=!0,e.prev=2,e.next=5,t.$store.dispatch("productsModule/list");case 5:return e.prev=5,t.productsLoading=!1,e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])})))()}},computed:{products:function(){return this.$store.state.productsModule.products},getTotal:function(){return this.purchases.reduce((function(t,e){return t+e.purchasePrice*e.qty}),0).toFixed(2)}}},l=s,u=(r("3d8b"),r("2877")),d=r("6544"),f=r.n(d),p=r("0798"),v=r("8336"),h=r("b0af"),m=r("99d9"),y=r("62ad"),b=r("a523"),g=r("169a"),w=r("ce7e"),x=r("132d"),S=r("0fd9"),_=r("b974"),C=r("1f4f"),A=r("2fa4"),k=r("b73d"),E=r("8654"),V=r("71d9"),M=r("2a7f"),T=r("3a2f"),P=Object(u["a"])(l,o,a,!1,null,"90d72ff6",null);e["default"]=P.exports;f()(P,{VAlert:p["a"],VBtn:v["a"],VCard:h["a"],VCardActions:m["b"],VCol:y["a"],VContainer:b["a"],VDialog:g["a"],VDivider:w["a"],VIcon:x["a"],VRow:S["a"],VSelect:_["a"],VSimpleTable:C["a"],VSpacer:A["a"],VSwitch:k["a"],VTextField:E["a"],VToolbar:V["a"],VToolbarTitle:M["c"],VTooltip:T["a"]})},fb6a:function(t,e,r){"use strict";var o=r("23e7"),a=r("861d"),n=r("e8b5"),i=r("23cb"),c=r("50c4"),s=r("fc6a"),l=r("8418"),u=r("b622"),d=r("1dde"),f=r("ae40"),p=d("slice"),v=f("slice",{ACCESSORS:!0,0:0,1:2}),h=u("species"),m=[].slice,y=Math.max;o({target:"Array",proto:!0,forced:!p||!v},{slice:function(t,e){var r,o,u,d=s(this),f=c(d.length),p=i(t,f),v=i(void 0===e?f:e,f);if(n(d)&&(r=d.constructor,"function"!=typeof r||r!==Array&&!n(r.prototype)?a(r)&&(r=r[h],null===r&&(r=void 0)):r=void 0,r===Array||void 0===r))return m.call(d,p,v);for(o=new(void 0===r?Array:r)(y(v-p,0)),u=0;p<v;p++,u++)p in d&&l(o,u,d[p]);return o.length=u,o}})}}]);
//# sourceMappingURL=chunk-a545858c.a04a5d72.js.map