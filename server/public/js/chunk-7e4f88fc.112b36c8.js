(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7e4f88fc"],{"1148d":function(t,e,r){"use strict";var a=r("a691"),o=r("1d80");t.exports="".repeat||function(t){var e=String(o(this)),r="",n=a(t);if(n<0||n==1/0)throw RangeError("Wrong number of repetitions");for(;n>0;(n>>>=1)&&(e+=e))1&n&&(r+=e);return r}},"13d5":function(t,e,r){"use strict";var a=r("23e7"),o=r("d58f").left,n=r("a640"),i=r("ae40"),s=n("reduce"),c=i("reduce",{1:0});a({target:"Array",proto:!0,forced:!s||!c},{reduce:function(t){return o(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"3ca3":function(t,e,r){"use strict";var a=r("6547").charAt,o=r("69f3"),n=r("7dd0"),i="String Iterator",s=o.set,c=o.getterFor(i);n(String,"String",(function(t){s(this,{type:i,string:String(t),index:0})}),(function(){var t,e=c(this),r=e.string,o=e.index;return o>=r.length?{value:void 0,done:!0}:(t=a(r,o),e.index+=t.length,{value:t,done:!1})}))},"408a":function(t,e,r){var a=r("c6b6");t.exports=function(t){if("number"!=typeof t&&"Number"!=a(t))throw TypeError("Incorrect invocation");return+t}},4392:function(t,e,r){"use strict";var a=r("618e"),o=r.n(a);o.a},"4df4":function(t,e,r){"use strict";var a=r("0366"),o=r("7b0b"),n=r("9bdd"),i=r("e95a"),s=r("50c4"),c=r("8418"),l=r("35a1");t.exports=function(t){var e,r,d,u,f,v,p=o(t),h="function"==typeof this?this:Array,m=arguments.length,y=m>1?arguments[1]:void 0,b=void 0!==y,g=l(p),x=0;if(b&&(y=a(y,m>2?arguments[2]:void 0,2)),void 0==g||h==Array&&i(g))for(e=s(p.length),r=new h(e);e>x;x++)v=b?y(p[x],x):p[x],c(r,x,v);else for(u=g.call(p),f=u.next,r=new h;!(d=f.call(u)).done;x++)v=b?n(u,y,[d.value,x],!0):d.value,c(r,x,v);return r.length=x,r}},"618e":function(t,e,r){},a630:function(t,e,r){var a=r("23e7"),o=r("4df4"),n=r("1c7e"),i=!n((function(t){Array.from(t)}));a({target:"Array",stat:!0,forced:i},{from:o})},af81:function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("custom-card",{attrs:{title:"Realizar venta",icon:"mdi-plus"},scopedSlots:t._u([{key:"content",fn:function(){return[r("v-container",[r("v-alert",{directives:[{name:"show",rawName:"v-show",value:t.historyMode,expression:"historyMode"}],attrs:{prominent:"",type:"error"}},[r("v-col",{staticClass:"grow"},[t._v("Aviso: Estás en el modo de ventas históricas, por lo que las ventas que registres no modificarán tu stock actual.")])],1),r("v-row",{attrs:{align:"center",dense:""}},[r("p",{staticClass:"body-1 font-weight-bold d-inline mx-3"},[t._v("Fecha:")]),r("v-col",{attrs:{cols:"12",sm:"12",md:"3"}},[r("v-text-field",{staticClass:"date-width",attrs:{outlined:"",dense:"","prepend-icon":"event",type:"date"},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1),r("v-col",{staticClass:"d-flex",attrs:{cols:"12",sm:"4"}},[r("v-select",{attrs:{items:t.commerce,label:"Selecciona el negocio",outlined:"",dense:""},model:{value:t.selectedCommerce,callback:function(e){t.selectedCommerce=e},expression:"selectedCommerce"}})],1),r("v-spacer"),r("v-switch",{staticClass:"mb-5",attrs:{label:"Modo histórico: "+(t.historyMode?"Activo":"Inactivo")},model:{value:t.historyMode,callback:function(e){t.historyMode=e},expression:"historyMode"}})],1),r("v-dialog",{attrs:{width:"1200"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[r("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on;return[r("v-btn",t._g({staticClass:"my-3 mr-3",attrs:{tile:"",color:"primary"}},Object.assign({},o,a)),[r("v-icon",{attrs:{left:""}},[t._v("search")]),t._v("Agregar producto ")],1)]}}],null,!0)},[r("span",[t._v("Inventario")])])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[r("v-card",[r("v-toolbar",{attrs:{color:"primary",dark:""}},[r("v-toolbar-title",[t._v("Productos")])],1),r("v-container",[r("products",{attrs:{selectButton:!0},on:{"add-product":t.addSale}})],1),r("v-divider"),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"primary",text:""},on:{click:function(e){t.dialog=!1}}},[t._v("De acuerdo")])],1)],1)],1),r("v-btn",{attrs:{outlined:"",color:"primary",to:{name:"salesHistory"}}},[r("v-icon",{attrs:{left:""}},[t._v("mdi-format-list-checks")]),t._v("Ver historial ")],1),"SOFTWARE"==t.selectedCommerce||"HARDWARE"==t.selectedCommerce?r("v-simple-table",{scopedSlots:t._u([{key:"default",fn:function(){return[r("thead",[r("tr",[r("th",{staticClass:"text-left"},[r("span",[t._v("Tipo")])]),r("th",{staticClass:"text-left"},[r("span",[t._v("Servicio")])]),r("th",{staticClass:"text-left"},[r("span",[t._v("Costo")])]),r("th",{staticClass:"text-left"},[r("span",[t._v("Precio de servicio")])]),r("th",{staticClass:"text-left"},[r("span",[t._v("Datos del celular")])]),r("th",{staticClass:"text-left"},[r("span",[t._v("Descripción")])]),r("th",{staticClass:"text-left"},[r("span",[t._v("Eliminar servicio")])])])]),r("tbody",t._l(t.sales,(function(e,a){return r("tr",{key:"a"+a},[r("td",[t._v(t._s(e.productDetails.typeId?e.productDetails.typeId.name:"Sin tipo"))]),r("td",[t._v(t._s(e.productDetails.name))]),r("td",[r("v-text-field",{staticClass:"inputs-width",attrs:{prefix:"S/.",type:"number"},model:{value:e.purchasePrice,callback:function(r){t.$set(e,"purchasePrice",r)},expression:"product.purchasePrice"}})],1),r("td",[r("v-text-field",{staticClass:"inputs-width",attrs:{prefix:"S/.",type:"number"},model:{value:e.purchasePrice,callback:function(r){t.$set(e,"purchasePrice",r)},expression:"product.purchasePrice"}})],1),r("td",[r("ul",[r("li",[t._v(" Modelo: "),r("v-text-field",{staticClass:"inputs-width",attrs:{type:"text"},model:{value:e.purchasePrice,callback:function(r){t.$set(e,"purchasePrice",r)},expression:"product.purchasePrice"}})],1),r("li",[t._v(" Marca: "),r("v-text-field",{staticClass:"inputs-width",attrs:{type:"text"},model:{value:e.purchasePrice,callback:function(r){t.$set(e,"purchasePrice",r)},expression:"product.purchasePrice"}})],1)])]),r("td",[r("v-textarea",{attrs:{outlined:"",placeholder:"Descripción"}})],1),r("td",[r("v-btn",{attrs:{small:"",color:"error"},on:{click:function(e){return t.deleteSale(a)}}},[t._v("Eliminar")])],1)])})),0)]},proxy:!0}],null,!1,1679236240)}):r("v-simple-table",{scopedSlots:t._u([{key:"default",fn:function(){return[r("thead",[r("tr",[r("th",{staticClass:"text-left"},[r("span",[t._v("Tipo")])]),r("th",{staticClass:"text-left"},[r("span",[t._v("Producto")])]),r("th",{staticClass:"text-left"},[r("span",[t._v("Marca")])]),r("th",{staticClass:"text-left"},[r("span",[t._v("Cantidad")])]),r("th",{staticClass:"text-left"},[r("span",[t._v("Precio de compra")])]),r("th",{staticClass:"text-left"},[r("span",[t._v("Precio de venta")])]),r("th",{staticClass:"text-left"},[r("span",[t._v("Subtotal")])]),r("th",{staticClass:"text-left"},[r("span",[t._v("Eliminar producto")])])])]),r("tbody",t._l(t.sales,(function(e,a){return r("tr",{key:"a"+a},[r("td",[t._v(t._s(e.productDetails.typeId?e.productDetails.typeId.name:"Sin tipo"))]),r("td",[t._v(t._s(e.productDetails.name))]),r("td",[t._v(t._s(e.productDetails.brandId?e.productDetails.brandId.name:"Sin Marca"))]),r("td",[r("v-text-field",{staticClass:"inputs-width",attrs:{suffix:"unidades",type:"number"},model:{value:e.qty,callback:function(r){t.$set(e,"qty",r)},expression:"product.qty"}})],1),r("td",[t.editPurchasePrice?r("v-text-field",{staticClass:"inputs-width",attrs:{prefix:"S/.",type:"number"},model:{value:e.purchasePrice,callback:function(r){t.$set(e,"purchasePrice",r)},expression:"product.purchasePrice"}}):r("v-btn",{attrs:{color:"error",outlined:"",small:""},on:{click:function(e){t.editPurchasePrice=!0}}},[t._v("Editar")])],1),r("td",[r("v-text-field",{staticClass:"inputs-width",attrs:{prefix:"S/.",type:"number"},model:{value:e.salePrice,callback:function(r){t.$set(e,"salePrice",r)},expression:"product.salePrice"}})],1),r("td",[t._v("S/."+t._s((e.salePrice*e.qty).toFixed(2)))]),r("td",[r("v-btn",{attrs:{small:"",color:"error"},on:{click:function(e){return t.deleteSale(a)}}},[t._v("Eliminar")])],1)])})),0)]},proxy:!0}])}),"SOFTWARE"==t.selectedCommerce||"HARDWARE"==t.selectedCommerce?r("v-alert",{directives:[{name:"show",rawName:"v-show",value:0==t.sales.length,expression:"sales.length==0"}],staticClass:"my-5",attrs:{type:"warning",text:""}},[t._v("Aún no agregaste servicios a esta venta")]):r("v-alert",{directives:[{name:"show",rawName:"v-show",value:0==t.sales.length,expression:"sales.length==0"}],staticClass:"my-5",attrs:{type:"warning",text:""}},[t._v("Aún no agregaste productos a esta venta")]),r("v-row",{staticClass:"mr-3 mb-3",attrs:{justify:"end"}},[r("v-card",{staticClass:"pa-3",attrs:{dark:"",outlined:"",color:"info"}},[r("strong",{staticClass:"text--white"},[t._v("Total:")]),t._v(" "),r("span",{staticClass:"total"},[t._v("S/."+t._s(t.getTotal))])])],1),r("v-btn",{attrs:{loading:t.loadingButton,color:"success"},on:{click:function(e){return t.saveSale(t.sales,t.date,t.selectedCommerce)}}},[t._v("Terminar venta")])],1)]},proxy:!0}])})},o=[],n=(r("13d5"),r("a434"),r("b680"),r("b85c")),i=(r("96cf"),r("1da1")),s=r("d101"),c={components:{products:s["a"]},data:function(){return{dialog:null,selectedCommerce:"",editPurchasePrice:!1,historyMode:!1,selectedProduct:null,date:(new Date).toISOString().substr(0,10),menu:!1,sales:[],total:0,productsLoading:!1,servicesLoading:!1,loadingButton:!1}},methods:{deleteSale:function(t){this.sales.splice(t,1)},addSale:function(t){t&&(this.sales.push({productDetails:t,productId:t._id,qty:1,purchasePrice:t.purchasePrice,salePrice:t.price,history:this.historyMode}),this.dialog=!1)},saveSale:function(t,e,r){var a=this;return Object(i["a"])(regeneratorRuntime.mark((function o(){var i,s,c,l,d,u,f,v,p,h,m,y;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:a.loadingButton=!0,t=a.$deepCopy(t),i=Object(n["a"])(t);try{for(i.s();!(s=i.n()).done;)c=s.value,delete c["productDetails"]}catch(b){i.e(b)}finally{i.f()}if(a.historyMode){l=Object(n["a"])(t);try{for(l.s();!(d=l.n()).done;)u=d.value,u.history=!0}catch(b){l.e(b)}finally{l.f()}}else{f=Object(n["a"])(t);try{for(f.s();!(v=f.n()).done;)p=v.value,p.history=!1}catch(b){f.e(b)}finally{f.f()}}return o.prev=5,e=new Date(e),e=new Date(e.getTime()- -6e4*e.getTimezoneOffset()),o.next=10,a.$store.dispatch("salesModule/create",{history:a.historyMode,products:t,date:e,commerce:r});case 10:h=Object(n["a"])(t);try{for(h.s();!(m=h.n()).done;)y=m.value,y.history||a.$store.commit("productsModule/updateStock",{productId:y.productId,qty:-y.qty})}catch(b){h.e(b)}finally{h.f()}a.sales=[];case 13:return o.prev=13,a.loadingButton=!1,o.finish(13);case 16:case"end":return o.stop()}}),o,null,[[5,,13,16]])})))()}},computed:{products:function(){return this.$store.state.productsModule.products},services:function(){return this.$store.state.servicesModule.services},getTotal:function(){return this.sales.reduce((function(t,e){return t+e.salePrice*e.qty}),0).toFixed(2)},commerce:function(){return this.$store.state.commerce}}},l=c,d=(r("4392"),r("2877")),u=r("6544"),f=r.n(u),v=r("0798"),p=r("8336"),h=r("b0af"),m=r("99d9"),y=r("62ad"),b=r("a523"),g=r("169a"),x=r("ce7e"),w=r("132d"),_=r("0fd9"),S=r("b974"),C=r("1f4f"),P=r("2fa4"),k=r("b73d"),A=r("8654"),M=r("a844"),D=r("71d9"),T=r("2a7f"),V=r("3a2f"),I=Object(d["a"])(l,a,o,!1,null,"009189a8",null);e["default"]=I.exports;f()(I,{VAlert:v["a"],VBtn:p["a"],VCard:h["a"],VCardActions:m["b"],VCol:y["a"],VContainer:b["a"],VDialog:g["a"],VDivider:x["a"],VIcon:w["a"],VRow:_["a"],VSelect:S["a"],VSimpleTable:C["a"],VSpacer:P["a"],VSwitch:k["a"],VTextField:A["a"],VTextarea:M["a"],VToolbar:D["a"],VToolbarTitle:T["c"],VTooltip:V["a"]})},b680:function(t,e,r){"use strict";var a=r("23e7"),o=r("a691"),n=r("408a"),i=r("1148d"),s=r("d039"),c=1..toFixed,l=Math.floor,d=function(t,e,r){return 0===e?r:e%2===1?d(t,e-1,r*t):d(t*t,e/2,r)},u=function(t){var e=0,r=t;while(r>=4096)e+=12,r/=4096;while(r>=2)e+=1,r/=2;return e},f=c&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!s((function(){c.call({})}));a({target:"Number",proto:!0,forced:f},{toFixed:function(t){var e,r,a,s,c=n(this),f=o(t),v=[0,0,0,0,0,0],p="",h="0",m=function(t,e){var r=-1,a=e;while(++r<6)a+=t*v[r],v[r]=a%1e7,a=l(a/1e7)},y=function(t){var e=6,r=0;while(--e>=0)r+=v[e],v[e]=l(r/t),r=r%t*1e7},b=function(){var t=6,e="";while(--t>=0)if(""!==e||0===t||0!==v[t]){var r=String(v[t]);e=""===e?r:e+i.call("0",7-r.length)+r}return e};if(f<0||f>20)throw RangeError("Incorrect fraction digits");if(c!=c)return"NaN";if(c<=-1e21||c>=1e21)return String(c);if(c<0&&(p="-",c=-c),c>1e-21)if(e=u(c*d(2,69,1))-69,r=e<0?c*d(2,-e,1):c/d(2,e,1),r*=4503599627370496,e=52-e,e>0){m(0,r),a=f;while(a>=7)m(1e7,0),a-=7;m(d(10,a,1),0),a=e-1;while(a>=23)y(1<<23),a-=23;y(1<<a),m(1,1),y(2),h=b()}else m(0,r),m(1<<-e,0),h=b()+i.call("0",f);return f>0?(s=h.length,h=p+(s<=f?"0."+i.call("0",f-s)+h:h.slice(0,s-f)+"."+h.slice(s-f))):h=p+h,h}})},b85c:function(t,e,r){"use strict";r.d(e,"a",(function(){return n}));r("a4d3"),r("e01a"),r("d28b"),r("d3b7"),r("3ca3"),r("ddb0"),r("a630"),r("fb6a"),r("b0c0"),r("25f0");function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,a=new Array(e);r<e;r++)a[r]=t[r];return a}function o(t,e){if(t){if("string"===typeof t)return a(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(t,e):void 0}}function n(t,e){var r;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=o(t))||e&&t&&"number"===typeof t.length){r&&(t=r);var a=0,n=function(){};return{s:n,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,c=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return s=t.done,t},e:function(t){c=!0,i=t},f:function(){try{s||null==r["return"]||r["return"]()}finally{if(c)throw i}}}}},d28b:function(t,e,r){var a=r("746f");a("iterator")},d58f:function(t,e,r){var a=r("1c0b"),o=r("7b0b"),n=r("44ad"),i=r("50c4"),s=function(t){return function(e,r,s,c){a(r);var l=o(e),d=n(l),u=i(l.length),f=t?u-1:0,v=t?-1:1;if(s<2)while(1){if(f in d){c=d[f],f+=v;break}if(f+=v,t?f<0:u<=f)throw TypeError("Reduce of empty array with no initial value")}for(;t?f>=0:u>f;f+=v)f in d&&(c=r(c,d[f],f,l));return c}};t.exports={left:s(!1),right:s(!0)}},e01a:function(t,e,r){"use strict";var a=r("23e7"),o=r("83ab"),n=r("da84"),i=r("5135"),s=r("861d"),c=r("9bf2").f,l=r("e893"),d=n.Symbol;if(o&&"function"==typeof d&&(!("description"in d.prototype)||void 0!==d().description)){var u={},f=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof f?new d(t):void 0===t?d():d(t);return""===t&&(u[e]=!0),e};l(f,d);var v=f.prototype=d.prototype;v.constructor=f;var p=v.toString,h="Symbol(test)"==String(d("test")),m=/^Symbol\((.*)\)[^)]+$/;c(v,"description",{configurable:!0,get:function(){var t=s(this)?this.valueOf():this,e=p.call(t);if(i(u,t))return"";var r=h?e.slice(7,-1):e.replace(m,"$1");return""===r?void 0:r}}),a({global:!0,forced:!0},{Symbol:f})}},fb6a:function(t,e,r){"use strict";var a=r("23e7"),o=r("861d"),n=r("e8b5"),i=r("23cb"),s=r("50c4"),c=r("fc6a"),l=r("8418"),d=r("b622"),u=r("1dde"),f=r("ae40"),v=u("slice"),p=f("slice",{ACCESSORS:!0,0:0,1:2}),h=d("species"),m=[].slice,y=Math.max;a({target:"Array",proto:!0,forced:!v||!p},{slice:function(t,e){var r,a,d,u=c(this),f=s(u.length),v=i(t,f),p=i(void 0===e?f:e,f);if(n(u)&&(r=u.constructor,"function"!=typeof r||r!==Array&&!n(r.prototype)?o(r)&&(r=r[h],null===r&&(r=void 0)):r=void 0,r===Array||void 0===r))return m.call(u,v,p);for(a=new(void 0===r?Array:r)(y(p-v,0)),d=0;v<p;v++,d++)v in u&&l(a,d,u[v]);return a.length=d,a}})}}]);
//# sourceMappingURL=chunk-7e4f88fc.112b36c8.js.map