(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-382e38bc"],{"737d":function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a("fd3a"),o=a("49ef"),s=a("fbb4");function i(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only ".concat(arguments.length," present"));var a=Object(n["a"])(e);if(!Object(o["a"])(a))throw new RangeError("Invalid time value");var i=t||{},r=null==i.format?"extended":String(i.format),l=null==i.representation?"complete":String(i.representation);if("extended"!==r&&"basic"!==r)throw new RangeError("format must be 'extended' or 'basic'");if("date"!==l&&"time"!==l&&"complete"!==l)throw new RangeError("representation must be 'date', 'time', or 'complete'");var c="",d="",u="extended"===r?"-":"",p="extended"===r?":":"";if("time"!==l){var m=Object(s["a"])(a.getDate(),2),v=Object(s["a"])(a.getMonth()+1,2),f=Object(s["a"])(a.getFullYear(),4);c="".concat(f).concat(u).concat(v).concat(u).concat(m)}if("date"!==l){var h=a.getTimezoneOffset();if(0!==h){var g=Math.abs(h),b=Object(s["a"])(Math.floor(g/60),2),x=Object(s["a"])(g%60,2),w=h<0?"+":"-";d="".concat(w).concat(b,":").concat(x)}else d="Z";var I=Object(s["a"])(a.getHours(),2),y=Object(s["a"])(a.getMinutes(),2),T=Object(s["a"])(a.getSeconds(),2),_=""===c?"":"T",k=[I,y,T].join(p);c="".concat(c).concat(_).concat(k).concat(d)}return c}},fb55:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-row",{attrs:{justify:"center"}},[a("material-card",{attrs:{width:"1500px",icon:"mdi-cellphone-dock",color:"primary",title:"Inversiones",text:"Tabla resumen de inversiones propias"}},[a("v-data-table",{attrs:{"no-results-text":"No se encontraron resultados",search:e.search,"hide-default-footer":"",headers:e.headers,items:e.filteredTools,"sort-by":"calories",page:e.page,"items-per-page":e.$store.state.itemsPerPage},on:{"page-count":function(t){e.pageCount=t},"update:page":function(t){e.page=t}},scopedSlots:e._u([{key:"top",fn:function(){return[a("v-container",[a("span",{staticClass:"font-weight-bold"},[e._v("Filtrar por nombre: "+e._s(e.search))]),a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6"}},[a("v-text-field",{attrs:{dense:"","hide-details":"","append-icon":"search",placeholder:"Escribe el nombre de la inversión","single-line":"",outlined:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),a("v-col",{attrs:{cols:"12",sm:"6"}},[a("v-dialog",{attrs:{"max-width":"600px"},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[a("v-btn",e._g({staticClass:"mb-2",attrs:{color:"primary",dark:""}},n),[e._v("Agregar inversión")])]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("v-icon",{staticClass:"mr-1",attrs:{color:"primary"}},[e._v("mdi-update")]),a("span",{staticClass:"headline"},[e._v(e._s(e.formTitle))])],1),a("v-divider"),a("v-container",{staticClass:"pa-5",attrs:{fluid:""}},[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("span",{staticClass:"font-weight-bold"},[e._v("Fecha:")]),a("v-text-field",{staticClass:"date-width",attrs:{outlined:"",dense:"","hide-details":"","prepend-icon":"event",type:"date"},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}})],1),a("v-col",{attrs:{cols:"12",sm:"12"}},[a("span",{staticClass:"font-weight-bold"},[e._v("Nombre")]),a("v-text-field",{attrs:{dense:"","hide-details":"",outlined:"",placeholder:"Nombre de la inversión"},model:{value:e.editedItem.name,callback:function(t){e.$set(e.editedItem,"name",t)},expression:"editedItem.name"}})],1),a("v-col",{attrs:{cols:"12",sm:"4"}},[a("span",{staticClass:"font-weight-bold"},[e._v("Tipo")]),a("v-select",{attrs:{placeholder:"Selecciona un Tipo","item-text":"name","item-valur":"_id",dense:"","hide-details":"",items:e.toolsTypes,"item-value":"_id",outlined:""},model:{value:e.editedItem.toolsTypeId,callback:function(t){e.$set(e.editedItem,"toolsTypeId",t)},expression:"editedItem.toolsTypeId"}})],1),a("v-col",{attrs:{cols:"12",sm:"4"}},[a("span",{staticClass:"font-weight-bold"},[e._v("Cantidad")]),a("v-text-field",{attrs:{suffix:"unidades",dense:"","hide-details":"",outlined:"",type:"number"},model:{value:e.editedItem.stock,callback:function(t){e.$set(e.editedItem,"stock",t)},expression:"editedItem.stock"}})],1),a("v-col",{attrs:{cols:"12",sm:"4"}},[a("span",{staticClass:"font-weight-bold"},[e._v("Costo")]),a("v-text-field",{attrs:{prefix:"S/.",dense:"","hide-details":"",outlined:"",type:"number"},model:{value:e.editedItem.purchasePrice,callback:function(t){e.$set(e.editedItem,"purchasePrice",t)},expression:"editedItem.purchasePrice"}})],1),a("v-col",{attrs:{cols:"12",sm:"12"}},[a("span",{staticClass:"font-weight-bold"},[e._v("Descripción")]),a("v-textarea",{attrs:{"hide-details":"",placeholder:"Ingresa una descripción",outlined:""},model:{value:e.editedItem.description,callback:function(t){e.$set(e.editedItem,"description",t)},expression:"editedItem.description"}})],1)],1)],1),a("v-card-actions",{attrs:{"rd-actions":""}},[a("div",{staticClass:"flex-grow-1"}),a("v-btn",{attrs:{outlined:"",color:"error",text:""},on:{click:e.close}},[e._v("Cancelar")]),a("v-btn",{attrs:{loading:e.loadingButton,color:"success"},on:{click:e.save}},[e._v("Guardar")])],1)],1)],1)],1),a("v-col",{attrs:{cols:"12",sm:"4"}},[a("span",{staticClass:"font-weight-bold"},[e._v("Filtrar por tipo:")]),a("v-select",{attrs:{clearable:"","hide-details":"",dense:"",placeholder:"Selecciona un tipo",items:e.toolsTypes,"item-text":"name","item-value":"_id",outlined:""},on:{"click:clear":function(t){return e.showAllTypes()}},model:{value:e.selectedType,callback:function(t){e.selectedType=t},expression:"selectedType"}})],1),a("v-col",{attrs:{cols:"12",sm:"4"}},[a("span",{staticClass:"font-weight-bold"},[e._v("Total de inversión:")]),a("h1",[e._v("S/"+e._s(e.totalInvestment))])])],1)],1)]},proxy:!0},{key:"item.date",fn:function(t){var a=t.item;return[e._v(e._s(e._f("formatDate")(a.date)))]}},{key:"item.toolsTypeId",fn:function(t){var a=t.item;return[e._v(e._s(a.toolsTypeId?a.toolsTypeId.name:"Sin tipo"))]}},{key:"item.action",fn:function(t){var n=t.item;return[a("v-btn",{staticClass:"mr-3",attrs:{small:"",color:"secondary"},on:{click:function(t){return e.editItem(n)}}},[e._v("Editar")]),a("v-btn",{attrs:{small:"",color:"error"},on:{click:function(t){return e.deleteItem(n)}}},[e._v("Eliminar")])]}},{key:"no-data",fn:function(){return[a("v-alert",{attrs:{type:"error",value:!0}},[e._v("Aún no cuentas con inversiones")])]},proxy:!0}])}),a("v-col",{attrs:{cols:"12",sm:"12"}},[a("span",[a("strong",[e._v("Mostrando:")]),e._v(" "+e._s(e.$store.state.itemsPerPage>e.tools.length?e.tools.length:e.$store.state.itemsPerPage)+" de "+e._s(e.tools.length)+" registros ")])]),a("div",{staticClass:"text-center pt-2"},[a("v-pagination",{attrs:{length:e.pageCount},model:{value:e.page,callback:function(t){e.page=t},expression:"page"}})],1)],1)],1)],1)},o=[],s=(a("4de4"),a("c975"),a("13d5"),a("a434"),a("b680"),a("96cf"),a("1da1")),i=a("b166"),r=a("737d"),l=function(){return{name:"",toolsTypeId:null,stock:0,purchasePrice:0,description:"",date:Object(r["a"])(new Date,{representation:"date"})}},c={components:{},filters:{formatDate:function(e){return e?Object(i["a"])(new Date(e),"dd/MM/yyyy"):"Sin fecha"}},data:function(){return{date:Object(r["a"])(new Date,{representation:"date"}),page:1,pageCount:0,selectedType:null,loadingButton:!1,validateError:!1,search:"",dialog:!1,headers:[{text:"Fecha",align:"left",sortable:!1,value:"date"},{text:"Nombre",align:"left",sortable:!1,value:"name"},{text:"Cantidad",align:"left",sortable:!0,value:"stock"},{text:"Costo",align:"left",sortable:!0,value:"purchasePrice"},{text:"Tipo",align:"left",sortable:!0,value:"toolsTypeId"},{text:"Descripción",align:"left",sortable:!0,value:"description"},{text:"Acciones",value:"action",sortable:!1}],tools:[],toolsTypes:[],editedIndex:-1,editedItem:l(),defaultItem:l()}},computed:{formTitle:function(){return-1===this.editedIndex?"Nueva inversión":"Editar inversión"},filteredTools:function(){var e=this;return this.selectedType?this.tools.filter((function(t){return t.toolsTypeId?t.toolsTypeId._id===e.selectedType:null})):this.tools},totalInvestment:function(){return this.filteredTools.reduce((function(e,t){return e+t.purchasePrice*t.stock}),0).toFixed(2)}},watch:{dialog:function(e){e||this.close()}},mounted:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$store.dispatch("loadingModule/showLoading"),t.next=3,e.initialize();case 3:e.$store.dispatch("loadingModule/showLoading",!1);case 4:case"end":return t.stop()}}),t)})))()},methods:{initialize:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("toolsModule/list");case 2:return t.next=4,e.$store.dispatch("toolsTypesModule/list");case 4:e.tools=e.$deepCopy(e.$store.state.toolsModule.tools),e.toolsTypes=e.$deepCopy(e.$store.state.toolsTypesModule.toolsTypes);case 6:case"end":return t.stop()}}),t)})))()},editItem:function(e){this.editedIndex=this.tools.indexOf(e),e.date?this.date=Object(r["a"])(new Date(e.date),{representation:"date"}):this.date=null,this.editedItem=Object.assign({},e),this.dialog=!0},deleteItem:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var n,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=t.tools.indexOf(e),o=t.tools[n]._id,a.next=4,t.$confirm("¿Realmente deseas eliminar este registro?");case 4:if(!a.sent){a.next=8;break}return a.next=7,t.$store.dispatch("toolsModule/delete",o);case 7:t.tools.splice(n,1);case 8:case"end":return a.stop()}}),a)})))()},close:function(){var e=this;this.dialog=!1,setTimeout((function(){e.date=Object(r["a"])(new Date,{representation:"date"}),e.editedItem=Object.assign({},e.defaultItem),e.editedIndex=-1}),300)},save:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.editedItem.date=new Date(e.date),e.editedItem.date=new Date(e.editedItem.date.getTime()- -6e4*e.editedItem.date.getTimezoneOffset()),e.loadingButton=!0,!(e.editedIndex>-1)){t.next=16;break}return a=e.tools[e.editedIndex]._id,t.prev=5,t.next=8,e.$store.dispatch("toolsModule/update",{id:a,data:e.editedItem});case 8:n=t.sent,Object.assign(e.tools[e.editedIndex],n),e.close();case 11:return t.prev=11,e.loadingButton=!1,t.finish(11);case 14:t.next=25;break;case 16:return t.prev=16,t.next=19,e.$store.dispatch("toolsModule/create",e.editedItem);case 19:o=t.sent,e.tools.push(o),e.close();case 22:return t.prev=22,e.loadingButton=!1,t.finish(22);case 25:case"end":return t.stop()}}),t,null,[[5,,11,14],[16,,22,25]])})))()},showAllTypes:function(){this.selectedType=null}}},d=c,u=a("2877"),p=a("6544"),m=a.n(p),v=a("0798"),f=a("8336"),h=a("b0af"),g=a("99d9"),b=a("62ad"),x=a("a523"),w=a("8fea"),I=a("169a"),y=a("ce7e"),T=a("132d"),_=a("891e"),k=a("0fd9"),C=a("b974"),O=a("8654"),j=a("a844"),$=Object(u["a"])(d,n,o,!1,null,"5692e96c",null);t["default"]=$.exports;m()($,{VAlert:v["a"],VBtn:f["a"],VCard:h["a"],VCardActions:g["b"],VCardTitle:g["e"],VCol:b["a"],VContainer:x["a"],VDataTable:w["a"],VDialog:I["a"],VDivider:y["a"],VIcon:T["a"],VPagination:_["a"],VRow:k["a"],VSelect:C["a"],VTextField:O["a"],VTextarea:j["a"]})}}]);
//# sourceMappingURL=chunk-382e38bc.1ce2e891.js.map