(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e7a62eb2"],{1076:function(t,e,a){"use strict";var s=a("d1f1"),r=a.n(s);r.a},"737d":function(t,e,a){"use strict";a.d(e,"a",(function(){return o}));var s=a("fd3a"),r=a("49ef"),c=a("fbb4");function o(t,e){if(arguments.length<1)throw new TypeError("1 argument required, but only ".concat(arguments.length," present"));var a=Object(s["a"])(t);if(!Object(r["a"])(a))throw new RangeError("Invalid time value");var o=e||{},n=null==o.format?"extended":String(o.format),i=null==o.representation?"complete":String(o.representation);if("extended"!==n&&"basic"!==n)throw new RangeError("format must be 'extended' or 'basic'");if("date"!==i&&"time"!==i&&"complete"!==i)throw new RangeError("representation must be 'date', 'time', or 'complete'");var l="",d="",u="extended"===n?"-":"",p="extended"===n?":":"";if("time"!==i){var v=Object(c["a"])(a.getDate(),2),f=Object(c["a"])(a.getMonth()+1,2),m=Object(c["a"])(a.getFullYear(),4);l="".concat(m).concat(u).concat(f).concat(u).concat(v)}if("date"!==i){var h=a.getTimezoneOffset();if(0!==h){var b=Math.abs(h),y=Object(c["a"])(Math.floor(b/60),2),x=Object(c["a"])(b%60,2),_=h<0?"+":"-";d="".concat(_).concat(y,":").concat(x)}else d="Z";var g=Object(c["a"])(a.getHours(),2),C=Object(c["a"])(a.getMinutes(),2),w=Object(c["a"])(a.getSeconds(),2),P=""===l?"":"T",S=[g,C,w].join(p);l="".concat(l).concat(P).concat(S).concat(d)}return l}},af81:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("custom-card",{attrs:{title:"Realizar venta",icon:"mdi-plus"},scopedSlots:t._u([{key:"content",fn:function(){return[a("v-container",[a("v-alert",{directives:[{name:"show",rawName:"v-show",value:t.historyMode,expression:"historyMode"}],attrs:{prominent:"",type:"error"}},[a("v-col",{staticClass:"grow"},[t._v("Aviso: Estás en el modo de ventas históricas, por lo que las ventas que registres no modificarán tu stock actual.")])],1),a("v-row",{attrs:{align:"center",dense:""}},[a("p",{staticClass:"body-1 font-weight-bold d-inline mx-3"},[t._v("Fecha:")]),a("v-col",{attrs:{cols:"12",sm:"12",md:"3"}},[a("v-text-field",{staticClass:"date-width",attrs:{outlined:"",dense:"","prepend-icon":"event",type:"date"},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1),a("v-col",{staticClass:"d-flex",attrs:{cols:"12",sm:"4"}},[a("v-select",{attrs:{items:t.commerce,label:"Selecciona el negocio",outlined:"",dense:""},model:{value:t.selectedCommerce,callback:function(e){t.selectedCommerce=e},expression:"selectedCommerce"}})],1),a("v-spacer")],1),a("v-dialog",{attrs:{width:"1200"},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[a("v-btn",t._g({staticClass:"my-3 mr-3",attrs:{tile:"",color:"primary"}},Object.assign({},r,s)),[a("v-icon",{attrs:{left:""}},[t._v("search")]),t._v("Agregar producto ")],1)]}}],null,!0)},[a("span",[t._v("Inventario")])])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-toolbar",{attrs:{color:"primary",dark:""}},[a("v-toolbar-title",[t._v("Productos")])],1),a("v-container",[a("products",{attrs:{selectButton:!0},on:{"add-product":t.addSale}})],1),a("v-divider"),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary",text:""},on:{click:function(e){t.dialog=!1}}},[t._v("De acuerdo")])],1)],1)],1),a("v-btn",{attrs:{outlined:"",color:"primary",to:{name:"salesHistory"}}},[a("v-icon",{attrs:{left:""}},[t._v("mdi-format-list-checks")]),t._v("Ver historial ")],1),"SOFTWARE"==t.selectedCommerce||"HARDWARE"==t.selectedCommerce?a("v-simple-table",{scopedSlots:t._u([{key:"default",fn:function(){return[a("thead",[a("tr",[a("th",{staticClass:"text-left"},[a("span",[t._v("Tipo")])]),a("th",{staticClass:"text-left"},[a("span",[t._v("Servicio")])]),a("th",{staticClass:"text-left"},[a("span",[t._v("Costo")])]),a("th",{staticClass:"text-left"},[a("span",[t._v("Precio de servicio")])]),a("th",{staticClass:"text-left"},[a("span",[t._v("Datos del celular")])]),a("th",{staticClass:"text-left"},[a("span",[t._v("Descripción")])]),a("th",{staticClass:"text-left"},[a("span",[t._v("Eliminar servicio")])])])]),a("tbody",t._l(t.sales,(function(e,s){return a("tr",{key:"a"+s},[a("td",[t._v(t._s(e.productDetails.typeId?e.productDetails.typeId.name:"Sin tipo"))]),a("td",[t._v(t._s(e.productDetails.name))]),a("td",[a("v-text-field",{staticClass:"inputs-width",attrs:{prefix:"S/.",type:"number"},model:{value:e.purchasePrice,callback:function(a){t.$set(e,"purchasePrice",a)},expression:"product.purchasePrice"}})],1),a("td",[a("v-text-field",{staticClass:"inputs-width",attrs:{prefix:"S/.",type:"number"},model:{value:e.purchasePrice,callback:function(a){t.$set(e,"purchasePrice",a)},expression:"product.purchasePrice"}})],1),a("td",[a("ul",[a("li",[t._v(" Modelo: "),a("v-text-field",{staticClass:"inputs-width",attrs:{type:"text"},model:{value:e.purchasePrice,callback:function(a){t.$set(e,"purchasePrice",a)},expression:"product.purchasePrice"}})],1),a("li",[t._v(" Marca: "),a("v-text-field",{staticClass:"inputs-width",attrs:{type:"text"},model:{value:e.purchasePrice,callback:function(a){t.$set(e,"purchasePrice",a)},expression:"product.purchasePrice"}})],1)])]),a("td",[a("v-textarea",{attrs:{outlined:"",placeholder:"Descripción"}})],1),a("td",[a("v-btn",{attrs:{small:"",color:"error"},on:{click:function(e){return t.deleteSale(s)}}},[t._v("Eliminar")])],1)])})),0)]},proxy:!0}],null,!1,1679236240)}):a("v-simple-table",{scopedSlots:t._u([{key:"default",fn:function(){return[a("thead",[a("tr",[a("th",{staticClass:"text-left"},[a("span",[t._v("Tipo")])]),a("th",{staticClass:"text-left"},[a("span",[t._v("Producto")])]),a("th",{staticClass:"text-left"},[a("span",[t._v("Marca")])]),a("th",{staticClass:"text-left"},[a("span",[t._v("Cantidad")])]),a("th",{staticClass:"text-left"},[a("span",[t._v("Precio de compra")])]),a("th",{staticClass:"text-left"},[a("span",[t._v("Precio de venta")])]),a("th",{staticClass:"text-left"},[a("span",[t._v("Subtotal")])]),a("th",{staticClass:"text-left"},[a("span",[t._v("Eliminar producto")])])])]),a("tbody",t._l(t.sales,(function(e,s){return a("tr",{key:"a"+s},[a("td",[t._v(t._s(e.productDetails.typeId?e.productDetails.typeId.name:"Sin tipo"))]),a("td",[t._v(t._s(e.productDetails.name))]),a("td",[t._v(t._s(e.productDetails.brandId?e.productDetails.brandId.name:"Sin Marca"))]),a("td",[a("v-text-field",{staticClass:"inputs-width",attrs:{suffix:"unidades",type:"number"},model:{value:e.qty,callback:function(a){t.$set(e,"qty",a)},expression:"product.qty"}})],1),a("td",[t.editPurchasePrice?a("v-text-field",{staticClass:"inputs-width",attrs:{prefix:"S/.",type:"number"},model:{value:e.purchasePrice,callback:function(a){t.$set(e,"purchasePrice",a)},expression:"product.purchasePrice"}}):a("v-btn",{attrs:{color:"error",outlined:"",small:""},on:{click:function(e){t.editPurchasePrice=!0}}},[t._v("Editar")])],1),a("td",[a("v-text-field",{staticClass:"inputs-width",attrs:{prefix:"S/.",type:"number"},model:{value:e.salePrice,callback:function(a){t.$set(e,"salePrice",a)},expression:"product.salePrice"}})],1),a("td",[t._v("S/."+t._s((e.salePrice*e.qty).toFixed(2)))]),a("td",[a("v-btn",{attrs:{small:"",color:"error"},on:{click:function(e){return t.deleteSale(s)}}},[t._v("Eliminar")])],1)])})),0)]},proxy:!0}])}),"SOFTWARE"==t.selectedCommerce||"HARDWARE"==t.selectedCommerce?a("v-alert",{directives:[{name:"show",rawName:"v-show",value:0==t.sales.length,expression:"sales.length==0"}],staticClass:"my-5",attrs:{type:"warning",text:""}},[t._v("Aún no agregaste servicios a esta venta")]):a("v-alert",{directives:[{name:"show",rawName:"v-show",value:0==t.sales.length,expression:"sales.length==0"}],staticClass:"my-5",attrs:{type:"warning",text:""}},[t._v("Aún no agregaste productos a esta venta")]),a("v-row",{staticClass:"mr-3 mb-3",attrs:{justify:"end"}},[a("v-card",{staticClass:"pa-3",attrs:{dark:"",outlined:"",color:"info"}},[a("strong",{staticClass:"text--white"},[t._v("Total:")]),t._v(" "),a("span",{staticClass:"total"},[t._v("S/."+t._s(t.getTotal))])])],1),a("v-btn",{attrs:{loading:t.loadingButton,color:"success"},on:{click:function(e){return t.saveSale(t.sales,t.date,t.selectedCommerce)}}},[t._v("Terminar venta")])],1)]},proxy:!0}])})},r=[],c=(a("13d5"),a("a434"),a("b680"),a("b85c")),o=(a("96cf"),a("1da1")),n=a("d101"),i=a("737d"),l={components:{products:n["a"]},data:function(){return{dialog:null,selectedCommerce:"",editPurchasePrice:!1,historyMode:!1,selectedProduct:null,date:Object(i["a"])(new Date,{representation:"date"}),menu:!1,sales:[],total:0,productsLoading:!1,servicesLoading:!1,loadingButton:!1}},methods:{deleteSale:function(t){this.sales.splice(t,1)},addSale:function(t){t&&(this.sales.push({productDetails:t,productId:t._id,qty:1,purchasePrice:t.purchasePrice,salePrice:t.price,history:this.historyMode}),this.dialog=!1)},saveSale:function(t,e,a){var s=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var o,n,i,l,d,u,p,v,f,m,h,b;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:s.loadingButton=!0,t=s.$deepCopy(t),o=Object(c["a"])(t);try{for(o.s();!(n=o.n()).done;)i=n.value,delete i["productDetails"]}catch(y){o.e(y)}finally{o.f()}if(s.historyMode){l=Object(c["a"])(t);try{for(l.s();!(d=l.n()).done;)u=d.value,u.history=!0}catch(y){l.e(y)}finally{l.f()}}else{p=Object(c["a"])(t);try{for(p.s();!(v=p.n()).done;)f=v.value,f.history=!1}catch(y){p.e(y)}finally{p.f()}}return r.prev=5,e=new Date(e),e=new Date(e.getTime()- -6e4*e.getTimezoneOffset()),r.next=10,s.$store.dispatch("salesModule/create",{history:s.historyMode,products:t,date:e,commerce:a});case 10:m=Object(c["a"])(t);try{for(m.s();!(h=m.n()).done;)b=h.value,b.history||s.$store.commit("productsModule/updateStock",{productId:b.productId,qty:-b.qty})}catch(y){m.e(y)}finally{m.f()}s.sales=[];case 13:return r.prev=13,s.loadingButton=!1,r.finish(13);case 16:case"end":return r.stop()}}),r,null,[[5,,13,16]])})))()}},computed:{products:function(){return this.$store.state.productsModule.products},services:function(){return this.$store.state.servicesModule.services},getTotal:function(){return this.sales.reduce((function(t,e){return t+e.salePrice*e.qty}),0).toFixed(2)},commerce:function(){return this.$store.state.commerce}}},d=l,u=(a("1076"),a("2877")),p=a("6544"),v=a.n(p),f=a("0798"),m=a("8336"),h=a("b0af"),b=a("99d9"),y=a("62ad"),x=a("a523"),_=a("169a"),g=a("ce7e"),C=a("132d"),w=a("0fd9"),P=a("b974"),S=a("1f4f"),k=a("2fa4"),D=a("8654"),O=a("a844"),j=a("71d9"),T=a("2a7f"),V=a("3a2f"),M=Object(u["a"])(d,s,r,!1,null,"3557c35a",null);e["default"]=M.exports;v()(M,{VAlert:f["a"],VBtn:m["a"],VCard:h["a"],VCardActions:b["b"],VCol:y["a"],VContainer:x["a"],VDialog:_["a"],VDivider:g["a"],VIcon:C["a"],VRow:w["a"],VSelect:P["a"],VSimpleTable:S["a"],VSpacer:k["a"],VTextField:D["a"],VTextarea:O["a"],VToolbar:j["a"],VToolbarTitle:T["c"],VTooltip:V["a"]})},d1f1:function(t,e,a){}}]);
//# sourceMappingURL=chunk-e7a62eb2.dd3edf29.js.map